---
layout: doc
title: SAML v2 IdP Initiated Identity Provider APIs
description: APIs for creating, retrieving, updating and deleting SAML v2 IdP Initiated identity providers
---
:idp_since: 12600
:idp_display_name: SAML v2 IdP Initiated

include::docs/v1/tech/shared/_premium-edition-blurb.adoc[]

== Overview

[NOTE.since]
====
This API has been available since 1.26.0
====

The SAML v2 IdP Initiated IdP initiated Identity Provider allows an external IdP to send an unsolicited `AuthN` request when FusionAuth is acting as the Service Provider (or SP).

=== Operations

* <<Create a SAML v2 IdP Initiated Identity Provider>>
* <<Retrieve a SAML v2 IdP Initiated Identity Provider>>
* <<Update a SAML v2 IdP Initiated Identity Provider>>
* <<Delete a SAML v2 IdP Initiated Identity Provider>>

=== Login Operations

* <<Complete a SAML v2 IdP Initiated Login>>

=== Integration Details

The following values will likely be required by your SAML v2 IdP Initiated Identity Provider in order to trust FusionAuth as a relying party.

These values are autogenerated and viewable within the UI after creating the Identity Provider. They can be viewed by navigating to [breadcrumb]#Settings -> Identity Providers -> SAMLv2 IdP Initiated -> View#.

`<base_url>` is the URL for your FusionAuth instance, something like `\https://login.piedpiper.com`.

`<identityProviderId>` is the Id of the Identity Provider, and will be a valid UUID.

`<applicationId>` is the Id of the application that is the target of the login, and will be a valid UUID.

[cols="1,3"]

*Callback URL (ACS):*
`<base_url>/samlv2/acs/<identityProviderId>/<applicaitonId>`

*Issuer:*
`<base_url>/samlv2/sp/<identityProviderId>`

*Metadata URL:*
`<base_url>/samlv2/sp/metadata/<identityProviderId>`

Note: To receive a refresh token when completing the OAuth2 workflow when using an IdP initiated login, ensure you request the `offline_access` scope. To request a scope, add the following query parameter to your configured ACS in your IdP, `?scope=offline_access`. When logging into the FusionAuth admin UI, this step is optional as the `offline_access` scope will be implicitly added.

== Create a SAML v2 IdP Initiated Identity Provider

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Create a SAML v2 IdP Initiated Identity Provider using a generated id
[.endpoint]
.URI
--
[method]#POST# [uri]#/api/identity-provider#
--

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Create a SAML v2 IdP Initiated Identity Provider with the provided unique id
[.endpoint]
.URI
--
[method]#POST# [uri]#/api/identity-provider/`\{identityProviderId\}`#
--

The [field]#type# property in the request JSON indicates you are managing a SAML v2 IdP Initiated identity provider.

==== Request Parameters

[.api]
[field]#identityProviderId# [type]#[UUID]# [optional]#Optional# [default]#defaults to secure random UUID#::
The Id to use for the new Identity Provider. If an id is not provided, a secure random UUID is generated.

:samlv2_idp_initiated:
include::docs/v1/tech/apis/identity-providers/_samlv2-request-body.adoc[]
:samlv2_idp_initiated!:

=== Response

:never_search_error:
include::docs/v1/tech/apis/_standard-post-response-codes.adoc[]
:never_search_error!:

:samlv2_idp_initiated:
include::docs/v1/tech/apis/identity-providers/_samlv2-response-body.adoc[]
:samlv2_idp_initiated!:

== Retrieve a SAML v2 IdP Initiated Identity Provider

=== Request
[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Retrieve an Identity Provider by Id
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/identity-provider/`\{identityProviderId\}`#
--

==== Request Parameters

[.api]
[field]#identityProviderId# [type]#[UUID]# [required]#Required#::
The unique Id of the SAML v2 IdP Initiated Identity Provider to retrieve.

=== Response

:never_search_error:
include::docs/v1/tech/apis/_standard-get-response-codes.adoc[]
:never_search_error!:

:samlv2_idp_initiated:
include::docs/v1/tech/apis/identity-providers/_samlv2-response-body.adoc[]
:samlv2_idp_initiated!:

== Update a SAML v2 IdP Initiated Identity Provider

:capitalized_object_name: SAML v2 IdP Initiated Identity Provider
include::docs/v1/tech/apis/_generic-update-explanation-fragment.adoc[]
:capitalized_object_name!:

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Update an Identity Provider
[.endpoint]
.URI
--
[method]#PUT# [uri]#/api/identity-provider/`\{identityProviderId\}`#
--

:api_endpoint: pass:normal[/api/identity-provider/`\{identityProviderId\}`]
include::docs/v1/tech/apis/_patch-support.adoc[]

==== Request Parameters

[.api]
[field]#identityProviderId# [type]#[UUID]# [required]#Required#::
The unique Id of the SAML v2 IdP Initiated Identity Provider to update.

:samlv2_idp_initiated:
include::docs/v1/tech/apis/identity-providers/_samlv2-request-body.adoc[]
:samlv2_idp_initiated!:

=== Response

The response for this API contains the SAML v2 IdP Initiated Identity Provider that was updated.

:never_search_error:
include::docs/v1/tech/apis/_standard-put-response-codes.adoc[]
:never_search_error!:

:samlv2_idp_initiated:
include::docs/v1/tech/apis/identity-providers/_samlv2-response-body.adoc[]
:samlv2_idp_initiated!:

== Delete a SAML v2 IdP Initiated Identity Provider

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Delete a SAML v2 IdP Initiated Identity Provider by Id
[.endpoint]
.URI
--
[method]#DELETE# [uri]#/api/identity-provider/`\{identityProviderId\}`#
--

==== Request Parameters

[.api]
[field]#identityProviderId# [type]#[UUID]# [required]#Required#::
The unique Id of the SAML v2 IdP Initiated Identity Provider to delete.

=== Response

This API does not return a JSON response body.

:never_search_error:
include::docs/v1/tech/apis/_standard-delete-response-codes.adoc[]
:never_search_error!:

== Complete a SAML v2 IdP Initiated Login

This API allows you to complete a SAML v2 login after the user has authenticated with a SAML v2 identity provider.

This API is intended to be used if you want to build your own page to handle the SAML response. Using this API you can pass the `SAMLResponse` returned from the SAML v2 provider to FusionAuth and we will complete the login workflow and reconcile the user to FusionAuth.

include::docs/v1/tech/apis/identity-providers/_saml-complete-user-registration.adoc[]

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#no-authentication-required[icon:unlock[type=fas]] Complete SAML v2 IdP Initiated Login
[.endpoint]
.URI
--
[method]#POST# [uri]#/api/identity-provider/login#
--

==== Request Headers

[.api]
include::docs/v1/tech/apis/identity-providers/_x-forwarded-for-header.adoc[]
include::docs/v1/tech/apis/_x-fusionauth-tenant-id-header-scoped-operation-row-only.adoc[]

include::docs/v1/tech/apis/identity-providers/_identity-provider-login-request-body.adoc[]

=== Response

The response for this API contains the User object.

include::docs/v1/tech/apis/identity-providers/_identity-provider-login-response-body.adoc[]
:idp_display_name!:
:idp_since!:
