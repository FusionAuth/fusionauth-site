---
layout: doc
title: System APIs
description: APIs for retrieving and updating the system configuration
---

++++
<style>
dd p.deprecated {
  color: #B20000;
  font-weight: 500;
  margin-bottom: 0 !important;
  margin-top: 25px !important;
}
</style>
++++

== Overview

This page contains the APIs that are used for retrieving and updating the system configuration.

=== System Configuration
* <<Retrieve the System Configuration>>
* <<Update the System Configuration>>

=== System Tools
* <<Export System Logs>>
* <<Retrieve the Logging Level>>
* <<Update the Logging Level>>

=== System Status
* <<Retrieve System Status>>
* <<Retrieve System Version>>
* <<Retrieve System Metrics Using Prometheus>>

== Retrieve the System Configuration

This API is used to retrieve the System Configuration.

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Retrieve the System Configuration
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/system-configuration#
--

=== Response

The response for this API contains the System Configuration.

:no_errors:
:never_missing:
include::docs/v1/tech/apis/_standard-get-response-codes.adoc[]
:never_missing!:
:no_errors!:

include::docs/v1/tech/apis/_system-configuration-response-body.adoc[]

== Update the System Configuration

This API is used to update System Configuration.

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Update the System Configuration
[.endpoint]
.URI
--
[method]#PUT# [uri]#/api/system-configuration#
--

:api_endpoint: pass:normal[/api/system-configuration]
include::docs/v1/tech/apis/_patch-support.adoc[]

include::docs/v1/tech/apis/_system-configuration-request-body.adoc[]

=== Response

The response for this API contains the System Configuration.

include::docs/v1/tech/apis/_standard-post-response-codes.adoc[]

include::docs/v1/tech/apis/_system-configuration-response-body.adoc[]

== Export System Logs

[NOTE.since]
====
Available Since Version 1.16.0
====

This API is used to export the System Logs, the response will be a compressed zip archive containing the logs from the configured log directory. When running FusionAuth on Docker or other container service where logs are written to `stdout` and not written to the file system, this API will return an empty archive.

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Export the System Logs
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/system/log/export``?dateTimeSecondsFormat=\{dateTimeSecondsFormat\}&lastNBytes=\{lastNBytes\}&zoneId=\{zoneId\}``#
--

When calling the API using a `GET` request you will send the export criteria on the URL using request parameters.

==== Request Parameters

[.api]
[field]#dateTimeSecondsFormat# [type]#[String]#  [optional]#Optional# [default]#defaults to **[see description]**#::
The format string used to format the date and time columns in the export result.
+
When this parameter is omitted a default format of `M/d/yyyy hh:mm:ss a z` will be used. See the https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html[DateTimeFormatter patterns] for additional examples.

[field]#lastNBytes# [type]#[Long]# [optional]#Optional# [default]#defaults to `65,536`#::
The number of bytes to retrieve from the end of each of the system logs. When this value is `-1`, the entire log will be downloaded.

[field]#zoneId# [type]#[String]# [optional]#Optional# [default]#defaults to **[see description]**#::
The link:/docs/v1/tech/reference/data-types#time-zone[time zone] used to calculate the current time and build the filename.
+
For example:
+
[quote]
`America/Denver` or `US/Mountain`
+
&nbsp;
+
When this parameter is omitted the configured default report time zone will be used. See [field]#reportTimezone# in the link:/docs/v1/tech/apis/system/[System Configuration API].

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Export the System Logs
[.endpoint]
.URI
--
[method]#POST# [uri]#/api/system/system-log/export#
--

When calling the API using a `POST` request you will send the export criteria in a JSON request body.

include::docs/v1/tech/apis/_system-logs-request-body.adoc[]

=== Response

The response for this API will contain a compressed zip of the system logs.

:never_missing:
:never_search_error:
:success_code: 200
:success_message: pass:normal[The request was successful. The response will be a compressed archive byte stream with a `Content-Type` of `application/zip`.]
include::docs/v1/tech/apis/_standard-get-response-codes.adoc[]
:success_code!:
:success_message!:
:never_search_error!:
:never_missing!:

== Retrieve the Logging Level

The Logger API is used to retrieve the current log level for a particular logger by name.

[WARNING]
====
This API is subject to change and should only be used under instruction from FusionAuth support.
====

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Retrieve the logging level by logger name
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/logger``?name=\{name\}``#
--

==== Request Parameters

[.api]
[field]#name# [type]#[String]# [required]#Required#::
The logger name for which you are requesting to retrieve the current logging level.

=== Response

:never_missing:
:never_search_error:
include::docs/v1/tech/apis/_standard-get-response-codes.adoc[]
:never_search_error!:
:never_missing!:

==== Response Body

[.api]
[field]#name# [type]#[String]#::
The name of the logger.

[field]#level# [type]#[String]#::
The current logging level. Possible values are:
+
* `error`
* `warn`
* `info`
* `debug`
* `trace`
* `off`

[source,json]
.Example JSON Response
----
include::docs/src/json/logger/response.json[]
----

== Update the Logging Level

This API is used to update the log level for a particular FusionAuth package.

[WARNING]
====
This API is subject to change and should only be used under instruction from FusionAuth support.
====

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Update the logging level by logger name
[.endpoint]
.URI
--
[method]#POST# [uri]#/api/logger#
--

==== Request Headers

[.api]
[field]#Content-Type# [type]#[String]# [required]#Required#::
The request body is expected to be sent using form encoded data. Ensure your HTTP client sends the `Content-Type` request header set to `application/x-www-form-urlencoded`.

==== Request Parameters

[.api]
[field]#name# [type]#[String]# [required]#Required#::
The logger name for which you are requesting to update the current logging level.

[field]#level# [type]#[String]# [required]#Required#::
The requested logging level. Possible values are:
+
* `error`
* `warn`
* `info`
* `debug`
* `trace`
* `off`

=== Response

:never_missing:
:never_search_error:
include::docs/v1/tech/apis/_standard-get-response-codes.adoc[]
:never_search_error!:
:never_missing!:

==== Response Body

[.api]
[field]#level# [type]#[String]#::
The logging level. If the request was successful, this value should be equal to the request value. Possible values are:
+
* `error`
* `warn`
* `info`
* `debug`
* `trace`
* `off`

[source,json]
.Example JSON Response
----
include::docs/src/json/logger/response.json[]
----

== Retrieve System Status

The Status API is used to retrieve the current status and metrics for FusionAuth. This is useful for health checks and monitoring.

[NOTE]
====
FusionAuth also supports a system status check link:/docs/v1/tech/tutorials/prometheus/[using Prometheus].
====

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#no-authentication-required[icon:unlock[type=fas]] Return the system status without an API key
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/status#
--

[.api-authentication]
link:/docs/v1/tech/apis/authentication#no-authentication-required[icon:lock[type=fas]] Return the system status with an API key
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/status#
--

=== Response
The JSON response from the Status API is complex and subject to change. The only exception is the `version` key.

`version` will not change and will be returned as below.  As a reminder, an API key is required to obtain this value.
```javascript
{
//..
    "version": "1.26.1"
//..
}
```

The specific contents of the JSON body are not documented here. If you choose to use this API for monitoring purposes you should primarily use the response code to indicate server health. If you receive a `200` you may consider FusionAuth in a healthy state. The response body is intended for use by FusionAuth support.

[cols="1,9"]
.Response Codes
|===
|Code |Description

|200
|The FusionAuth is functioning properly

|452
| The FusionAuth is failing to make a JDBC connection to the configured database.

[since]#Available since 1.19.0#

|453
|The FusionAuth database connection pool connectivity is below the healthy threshold. Additional information may be available in the JSON response which is retrieved when using an API key.

[since]#Available since 1.19.0#

|454
|The FusionAuth database connectivity pool connectivity is below the healthy threshold. Additional information may be available in the JSON response which is retrieved when using an API key.

[since]#Available since 1.19.0#

|460
|FusionAuth is using Elasticsearch and the search service is reporting an unhealthy cluster status. In a cluster with 2+ nodes, this means the cluster status is being reported as `yellow` or `red`. In a single-node Elasticsearch configuration this means the cluster status is `red.`

[since]#Available since 1.19.0#

|500
|The FusionAuth server is not functioning properly. This could indicate that the database connectivity failed or one or more services within FusionAuth failed. Consult the FusionAuth link:/docs/v1/tech/troubleshooting/[Troubleshooting] to learn more about the failure or contact FusionAuth support for assistance.
|===

== Retrieve System Version

[NOTE.since]
====
Available Since Version 1.27.0
====

The Version API is used to retrieve the current version of FusionAuth.

=== Request

[.api-authentication]
link:/docs/v1/tech/apis/authentication#no-authentication-required[icon:lock[type=fas]] Return the FusionAuth system version with an API key
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/system/version#
--

=== Response

:never_missing:
:never_search_error:
:no_errors:
include::docs/v1/tech/apis/_standard-get-response-codes.adoc[]
:never_search_error!:
:never_missing!:

==== Response Body

[.api]
[field]#version# [type]#[String]#::
The version of the running FusionAuth instance.

[source,json]
.Example JSON Response
----
{
  "version": "1.27.0"
}
----


== Retrieve System Metrics Using Prometheus


[NOTE]
====
This API has been available since 1.26.0
====



This page contains the API that is used for retrieving FusionAuth application metrics to be used with Prometheus. Please refer to the link:/docs/v1/tech/tutorials/prometheus#[Prometheus setup] guide to understand how to set up Prometheus with the FusionAuth metrics endpoint.

[.api-authentication]
link:/docs/v1/tech/apis/authentication#api-key-authentication[icon:lock[type=fas]] Retrieve FusionAuth application metrics to use with Prometheus.
[.endpoint]
.URI
--
[method]#GET# [uri]#/api/prometheus/metrics#
--

=== Authentication
This endpoint can be authenticated with either API Keys or `basic auth` with API Keys authentication methods. Please refer to the link:/docs/v1/tech/apis/authentication#basic-authentication-with-api-key[Authentication] document for more details about how to use the `basic auth` authentication method with API keys.

=== Request Parameters
There are no request parameters required with this API.


=== Response
The response to this API call contains currently available metrics. The metrics in this response are subject to change.

include::docs/v1/tech/apis/_prometheus-jvm-gauges.adoc[]


Here is a partial response received from this endpoint.

[source,text]
.Example Prometheus Response
----
  # HELP jvm_memory_heap_committed Generated from Dropwizard metric import (metric=jvm.memory.heap.committed, type=com.codahale.metrics.jvm.MemoryUsageGaugeSet$8)
# TYPE jvm_memory_heap_committed gauge
jvm_memory_heap_committed 5.36870912E8
# HELP jvm_memory_non_heap_used Generated from Dropwizard metric import (metric=jvm.memory.non-heap.used, type=com.codahale.metrics.jvm.MemoryUsageGaugeSet$11)
# TYPE jvm_memory_non_heap_used gauge
jvm_memory_non_heap_used 1.66423384E8
# HELP jvm_memory_pools_CodeHeap__non_profiled_nmethods__used Generated from Dropwizard metric import (metric=jvm.memory.pools.CodeHeap-'non-profiled-nmethods'.used, type=com.codahale.metrics.jvm.MemoryUsageGaugeSet$17)
# TYPE jvm_memory_pools_CodeHeap__non_profiled_nmethods__used gauge
jvm_memory_pools_CodeHeap__non_profiled_nmethods__used 3.0334336E7
# HELP prime_mvc___admin_group_index__requests Generated from Dropwizard metric import (metric=prime-mvc.[/admin/group/index].requests, type=com.codahale.metrics.Timer)
# TYPE prime_mvc___admin_group_index__requests summary
prime_mvc___admin_group_index__requests{quantile="0.5",} 0.0
prime_mvc___admin_group_index__requests{quantile="0.75",} 0.0
prime_mvc___admin_group_index__requests{quantile="0.95",} 0.0
prime_mvc___admin_group_index__requests{quantile="0.98",} 0.0
prime_mvc___admin_group_index__requests{quantile="0.99",} 0.0
prime_mvc___admin_group_index__requests{quantile="0.999",} 0.0
prime_mvc___admin_group_index__requests_count 1.0
----
