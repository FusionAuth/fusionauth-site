---
layout: blog-post
title: The Bottleneck Pattern for User Management
description: How and why to use a centralized user management system.
author: Dan Moore
image: blogs/private-label-with-tenants/how-to-use-fusionauths-multi-tenant-feature-to-create-a-private-label-offering.png
category: blog
excerpt_separator: "<!--more-->"
---

One common pattern for modern organizations is to centralize user management with the bottleneck architecture. The auth system in the middle, and all authentication and authorization requests go through this system. 

<!--more-->

## The Bottleneck

In this architectural pattern, applications delegate the user management to the auth system. They can do so both for applications used by employees, such as Salesforce and Zendesk, and for external applications used by customers, such as custom web applications.

If the protocol is OpenID Connect, these applications are called Relying Parties, or RPs. If the protocol is SAML, the delegating applications are called Service Providers, or SPs. In either case, the key feature is that decisions about authentication or authorization are shifted from the application to a central service.

In OIDC systems, this centralized auth system is referred to as an OpenID provider, or OP. For SAML based systems, it is called an a Identity Provider, or IdP. The system's scope includes:

* authentication - who is this user
* authorization - what can this user do
* user management - registration, forgot password, two factor authentication, and more

However, an auth system can also federate to other providers of identity, such as Google, HYPR or SAML or OIDC compatible providers.

Here's a diagram of the architecure:

{% include _image.liquid src="/assets/img/blogs/bottleneck-pattern/bottleneck-diagram.png" alt="A common archictural diagram." class="img-fluid" figure=false %}

The applications, in purple, rely on the auth system, in teal. Depending on how the auth system is configured, the applications' requests for user information may be answered directly, based on infomration in the auth systems datastore. Or, alternately, the auth system may relay auth requests for a given user to the federated identity providers, in orange. (More about [the identity providers](/docs/v1/tech/identity-providers/) FusionAuth supports.)

## Benefits 

This user management architecture has some marked benefits. 

There is one place to manage all users and applications. This means that implementing organization wide policies is easier, including those which are security or compliance related. Users also have only one identity to maintain, so password or other information changes are simpler.

This bottleneck also serves as a maintainble list of applications used by the organization. Knowing services in use, and seeing who is using them, and how often, is as simple as signing into the auth system administration panel. This also helps the organization avoid buying apps with duplicate functionality, since you can see the list easily. 

It also makes it easy to turn user accounts on and off. Onboarding a new employee becomes simpler, and offboarding employees who leave is becomes a matter of disabling their account in one place, rather than hunting down all the places they have user accounts. Or worse, leaving those accounts enabled.

There are additional benefits to end users, as well. While username and password, preferably with multi factor authentication, remains a fine way to identify your users, there may be times when an alternative is a better user experience.  

If you have a custom application with a userbase of consumers, offering sign on with Google or Facebook is a great idea. One less password for your potential users to remember, and one less obstacle to their signing up. On the other hand, if the application is aimed at enterprise customers, offering authentication against ActiveDirectory can help adoption. If developers are your target market, GitHub authentication is a value add.

If your auth system allows for multiple different identity providers, your application can meet users where they are, rather than requiring them to have a new account. 

Finally, if your auth system has mature user management functionality, custom application development will be accelerated. No more worrying about building a front end to allow customer service representatives to lock accounts or end users to reset their passwords.

## Challenges

There are challenges with this approach as well. Some technical, some not so much. 

First off is the [SSO tax](https://sso.tax/). Many third party applications don't support delegating user managent to a standalone auth system, or don't allow that until you are paying enterprise prices. Investigate any applications that you need to see if and how they can act as a RP or SP. 

Another organizational challenge is making sure people don't go around your carefully maintained centralized user management system. A great way to encourage people to work within these constraints is to make it as easy as possible and to repeatedly explain the benefits.

Finally, beware of insecure or slow auth management systems. No one cares about authentication and authorization except when it doesn't work. Select a system that is robust, has great support, and is flexible enough to meet future needs.

## Webinar

If you'd like to see how easy it is to configure FusionAuth to server as an auth managemnt system, HYPR and FusionAuth will be hosting a webhinar on Thur July 16. 

In 15 minutes, Zendesk will be set up as an application and HYPR will be set up as an identity provider. [Sign up here](https://get.hypr.com/fusionauth-webcast).
