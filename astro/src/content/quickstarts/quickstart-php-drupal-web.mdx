---
title: Drupal
description: Quickstart integration of Drupal web application with FusionAuth
navcategory: getting-started
prerequisites: Drupal, Docker, Composer, Drush
section: web
technology: Drupal
language: PHP
icon: /img/icons/drupal.svg
faIcon: fa-gem
color: rose
cta: EmailListCTA
coderoot: https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-php-drupal-web/main
---
import Aside from '../../components/Aside.astro';
import LoginAfter from '../../diagrams/quickstarts/login-after.astro';
import LoginBefore from '../../diagrams/quickstarts/login-before.astro';
import RemoteCode from '../../components/RemoteCode.astro';
import Uielement from '../../components/Uielement.astro';
import Field from '../../components/Field.astro';
import Breadcrumb from '../../components/Breadcrumb.astro';

In this quickstart guide you will build a Drupal web application and integrate it with FusionAuth.

You'll be building it for [ChangeBank](https://www.youtube.com/watch?v=CXDxNCzUspM), a global leader in converting dollars into coins. It'll have areas reserved for users who have logged in as well as public facing sections.

The docker compose file and source code for a complete application are available at
https://github.com/FusionAuth/fusionauth-quickstart-php-drupal-web

## Prerequisites

- [Docker](https://www.docker.com): The quickest way to stand up FusionAuth. (There are [other ways](/docs/v1/tech/installation-guide/)).

<Aside type="note">
  This app has been tested with Drupal 10.1.5. This example should work with other compatible versions of Drupal 10. Drupal 10 requires PHP 8.1.0 or higher and MariaDB 10.3.7+ or MySQL/Percona 5.7.8+ in order to run.
</Aside>

## General Architecture

Drupal has, by default, a built-in login and authentication system. As such, the application will resemble the following before FusionAuth is introduced.

<LoginBefore alt={"Request flow during login before FusionAuth"}/>

The login flow will look like this after FusionAuth is introduced.

<LoginAfter alt={"Request flow during login after FusionAuth"}/>

In general, you are introducing FusionAuth in order to normalize and consolidate user data. This helps make sure it is consistent and up-to-date as well as offloading your login security and functionality to FusionAuth.

## Getting Started

In this section, you'll get FusionAuth up and running on your machine. You'll also create a Drupal application and configure it to use FusionAuth for authentication.

### Clone The Code

First off, grab the code from the repository and change into that directory.

```shell
git clone https://github.com/FusionAuth/fusionauth-quickstart-php-drupal-web.git
cd fusionauth-quickstart-php-drupal-web
```

### Create Your Drupal Application

The `complete-application` directory in the repository already contains a complete Drupal application, but for learning purposes you're going to create a new one from scratch and then switch the volumes in the `docker-compose.yml` file to point to your new application.

Let's start by grabbing a copy of Drupal 10 and creating a new project by running the following command.

```shell
composer create-project drupal/recommended-project:10.1.5 "your-application" && cd your-application
```

Next, you're going to make two changes in the `docker-compose.yml` file that will allow you to use your new Drupal application.

<Aside type="note">
 If you want to use the existing application at any point you simply need to revert the next two changes and then rebuild the docker containers and volumes.
</Aside>

On the `web` service change `volumes` from `./complete-application:/opt/drupal:cached` to `./your-application:/opt/drupal:cached`.

Next, you're going to update the database name so that you are not using the same database as the existing complete application. Under the `db2` service change the key `MYSQL_DATABASE` from `drupaldb` to `changebank`.

Save your changes and then run the following command to get the application up and running.

```shell
docker compose up -d
```

Once the application is up and running, you can navigate to http://localhost/ and you should be redirected to the Drupal installation wizard at http://localhost/core/install.php.

Run through the wizard and fill in all required fields. Make sure to enter the following.

On <Breadcrumb label="Step 1"/> choose your language then click <Uielement label="Save and continue"/>.

On <Breadcrumb label="Step 2"/> choose profile `Standard`. Click <Uielement label="Save and continue"/>.

On <Breadcrumb label="Step 4"/> enter the following database connection details.

- <Field label="Database type"/> - pick the `MySQL, MariaDB, Percona Server, or equivalent` option.
- <Field label="Database name"/> - `changebank`.
- <Field label="Database username"/> - `drupal`.
- <Field label="Database password"/> - `verybadpassword`.
- Expand on Advanced options.
  - set <Field label="Host"/> to `fusionauth-quickstart-php-drupal-web-db2-1`.
  - set the <Field label="port number"/> to `3307`.
- Click <Uielement label="Save and continue"/>.

On <Breadcrumb label="Step 7"/>

- <Field label="Site name"/> - `Change Bank`.
- <Field label="Site email addres"/> - `admin@example.com`.
- <Field label="Username"/> - `admin`.
- <Field label="Password"/> - `verybadpassword`.
- <Field label="Email address"/> - `admin@example.com`.
- Click <Uielement label="Save and continue"/>.


Once you've successfully completed the installation wizard you should land up on the welcome page.

Now that your Drupal application is installed, you're going to install a contributed module called "OpenID Connect" that will handle authenticating with FusionAuth and another module called "Admin Toolbar" which adds a bit of quality of life when navigating Drupal's administration menu.

In a terminal run the following command from `your-application` directory:

```shell
composer require 'drupal/openid_connect:3.x-dev@dev' 'drupal/admin_toolbar:^3.4'
```

To enable the modules, you can visit the extensions page of your Drupal application at http://localhost/admin/modules. Search for "OpenID Connect" and "Admin Toolbar" using the <Field label="Filter"/> field. Select the module checkboxes and then click on the <Uielement label="Install"/> button.

Alternatively, you can use drush to enable the modules. Drush is a command line shell and Unix scripting interface for Drupal. It is available as a [composer package](https://packagist.org/packages/drush/drush) and can be installed by running the following command.

```shell
composer require drush/drush
```

You might need to restart your containers for the changes to take effect. You can do so by running the following command.

```shell
docker compose restart
```

Once the containers are up and running, you'll want to connect to the Drupal container's terminal so that you can run drush commands. To do so, run the following command.

```shell
docker exec -it fusionauth-quickstart-php-drupal-web-web-1 bash
```

You should now be inside the Drupal container. Run the following command to enable the modules.

```shell
vendor/bin/drush pm-enable openid_connect admin_toolbar
```

Confirm with a yes when prompted.

```
Do you want to continue? (yes/no) [yes]:
yes
```

Drush can be used to run a number of commands and makes it easy to perform common tasks in Drupal.

Other popular commands include:

- `vendor/bin/drush cr` - Clears the cache,
- `vendor/bin/drush pm-enable <module name>` - Enables a module,
- `vendor/bin/drush updb` - Updates the database,
- `vendor/bin/drush uli` - Generates a one-time login link for a user,
- and many more.

For a full list of commands, visit https://www.drush.org/12.2.0/commands/all/.

Next, you will need to grab the client Id and client secret that you will need to configure the OpenID Connect module from FusionAuth running in adjacent container.

### Run FusionAuth Via Docker

In the root directory of the repo you'll find a Docker compose file `docker-compose.yml` and an environment variables configuration file `.env`. If you started the Drupal application, then the FusionAuth containers will already be running too. If not, you can start them by running the following command:

```shell
docker compose up -d
```

Here you are using a bootstrapping feature of FusionAuth, called [Kickstart](/docs/v1/tech/installation-guide/kickstart). When FusionAuth comes up for the first time, it will look at the `kickstart/kickstart.json` file and configure FusionAuth to a certain initial state.

<Aside type="note">
 If you ever want to reset the FusionAuth system, delete the volumes created by docker-compose by executing `docker compose down -v`, then re-run `docker compose up -d`.
</Aside>

FusionAuth will be initially configured with these settings:

* Your client Id is: `e9fdb985-9173-4e01-9d73-ac2d60d1dc8e`
* Your client secret is: `super-secret-secret-that-should-be-regenerated-for-production`
* Your example username is `richard@example.com` and your password is `password`.
* Your admin username is `admin@example.com` and your password is `password`.
* Your fusionAuthBaseUrl is 'http://localhost:9011/'

You can log into the [FusionAuth admin UI](http://localhost:9011/admin) and look around if you want, but with Docker and Kickstart, everything will already be configured correctly.

## Authentication

To set up your Drupal application to use FusionAuth for authentication, head to http://localhost/admin/config/people/openid-connect on your Drupal site.

Add a new client by clicking on <Uielement label="+ Generic OAuth 2.0"/> and then filling in the details as follows:

- <Field label="Name"/> - `generic`
- <Field label="Client ID"/> - `e9fdb985-9173-4e01-9d73-ac2d60d1dc8e`
- <Field label="Client secret"/> - `super-secret-secret-that-should-be-regenerated-for-production`
- <Field label="Authorization endpoint"/> - `http://host.docker.internal:9011/oauth2/authorize`
- <Field label="Token endpoint"/> - `http://host.docker.internal:9011/oauth2/token`
- <Field label="UserInfo endpoint"/> - `http://host.docker.internal:9011/oauth2/userinfo`

Scroll down and click <Uielement label="Create OpenID Connect client"/> to create the client.

While on the page that lists your newly created client, click on the <Breadcrumb label="Settings"/> tab and then under the section <Breadcrumb label="OpenID buttons display in user login form"/>, change the value from `Hidden` to `Below` in order to display the login with generic button on the login page.

Scroll down and click <Uielement label="Save configuration"/> to save the settings.

Before you test the authentication flow, you need to make a small change to allow visitors to create accounts on the Drupal application. Navigate to http://localhost/admin/config/people/accounts and change <Field label="Who can register accounts?"/> to `Visitors` and uncheck <Field label="Require email verification when a visitor creates an account"/> and save the configuration.

Then you will need to flush the cache for the changes to take effect.

Flushing the cache in Drupal can be done in one of two ways:

- Navigate to http://localhost/admin/config/development/performance and click on the <Uielement label="Clear all caches"/> button.
- Run the following command inside the Drupal docker container - `vendor/bin/drush cr`.

### Testing Authentication

Now that you have the client configured, you can test the authentication flow.

In the browser navigate to http://localhost/user/logout to logout of the Drupal application. Navigate to http://localhost/user/login and click on the <Uielement label="Login with generic"/> button.

You should be taken to the FusionAuth login page. Login with username `richard@example.com` and password `password`.

You should be redirected back to the Drupal application once successfully logged in.

## Customization

In this section, you'll turn your application into a trivial banking application with some styling.

You're going to create a module called "Changebank" that will handle the logic for making change from dollars and also add a couple of blocks to the application.

### Generate Changebank Module

On your terminal, make sure you are inside the Drupal docker container and run the following command.

```shell
vendor/bin/drush generate module
```
You will be presented with the module creation wizard. Fill it out as follows:

```
Welcome to module generator!

Module name:
Changebank

Module machine name [changebank]:
changebank

Module description:
Provides a way to make change from dollars.

Package [Custom]:
Custom

Dependencies (comma separated):

Would you like to create module file [No]:
Yes

Would you like to create install file [No]:
No

Would you like to create README.md file [No]:
No

The following directories and files have been created or updated:

- /opt/drupal/web/modules/changebank/changebank.info.yml
- /opt/drupal/web/modules/changebank/changebank.module
```

You are now going to expand on the module by generating two blocks, a form, a controller and a routing file.

To generate the first block, run the following command and complete the wizard:

```bash
vendor/bin/drush generate block
```

You will be presented with the block creation wizard. Fill it out as follows:

```
Welcome to block generator!

Module machine name:
changebank

Block admin label:
User Email Block

Plugin ID [changebank_user_email_block]:
useremailblock

Plugin class [UseremailblockBlock]:
UserEmailBlock

Block category [Custom]:
Custom

Make the block configurable? [No]:
No

Would you like to inject dependencies? [No]:
No

Create access callback? [No]:
No

The following directories and files have been created or updated:

- /opt/drupal/web/modules/changebank/src/Plugin/Block/UserEmailBlock.php
```

The second block is going to be very similar to the first, so you're going to generate it with the same block generation command:

```bash
vendor/bin/drush generate block
```

And then enter the following information:

```
Welcome to block generator!

Module machine name:
changebank

Block admin label:
User Login Logout Block

Plugin ID [changebank_user_login_logout_block]:
userloginlogoutlock

Plugin class [UserloginlogoutlockBlock]:
UserLoginLogoutBlock

Block category [Custom]:
Custom

Make the block configurable? [No]:
No

Would you like to inject dependencies? [No]:
No

Create access callback? [No]:
No

The following directories and files have been created or updated:

- /opt/drupal/web/modules/changebank/src/Plugin/Block/UserLoginLogoutBlock.php
```

To generate the form, run the following command:

```shell
vendor/bin/drush generate form
```

You will be presented with the form wizard. Fill it out as follows:

```
Welcome to form generator!

Module machine name:
changebank

Module name [Changebank]:
Changebank

Class [ExampleForm]:
ChangebankForm

Would you like to create a route for this form? [Yes]:
No

The following directories and files have been created or updated:

- /opt/drupal/web/modules/changebank/src/Form/ChangebankForm.php
```

Next, you're going to generate a controller with the following command:

```bash
vendor/bin/drush generate controller
```

You will be presented with the controller wizard. Fill it out as follows:

```
Welcome to controller generator!

Module machine name:
changebank

Module name [Changebank]:
Changebank

Class [ChangebankController]:
ChangebankController

Would you like to inject dependencies? [No]:
No

Would you like to create a route for this controller? [Yes]:
No

The following directories and files have been created or updated:

- /opt/drupal/web/modules/changebank/src/Controller/ChangebankController.php
```
Finally, we're going to generate a routing file with the following command:

```bash
vendor/bin/drush generate routing
```

You will be presented with the routing wizard. Fill it out as follows:

```
Module machine name:
changebank

Module name [Changebank]:
Changebank

The following directories and files have been created or updated:

- /opt/drupal/web/modules/changebank/changebank.routing.yml
```

### Customizing The Module

Now that you have all the files that are needed in your custom module, you're going to  customize them.

A summary of the files you will be editing are as follows:

- `ChangebankForm.php`
- `ChangebankController.php`
- `changebank.routing.yml`
- `UserEmailBlock.php`
- `UserLoginLogoutBlock.php`
- `changebank.module`

#### Customizing The Changebank Form

Select the `ChangebankForm.php` file located at `your-application/web/modules/changebank/src/Form/ChangebankForm.php` in your text editor, clear the existing boilerplate contents and add the following code.

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/modules/custom/changebank/src/Form/ChangebankForm.php"}
            lang="php" />

#### Customizing The Controller

Select the `ChangebankController.php` file located at `your-application/web/modules/changebank/src/Controller/ChangebankController.php` in your text editor and replace the content with the following code.

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/modules/custom/changebank/src/Controller/ChangebankController.php"}
            lang="php" />

#### Customizing The Routing

Next you're going to setup two routes, one for the form and one for the account page. Select the `changebank.routing.yml` file located at `your-application/web/modules/changebank/changebank.routing.yml` and replace the content with the following configuration.

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/modules/custom/changebank/changebank.routing.yml"}
            lang="yaml" />

#### Customizing User Email Block

To display the current user's email address in a block you're going to use the User Email Block. Select the `UserEmailBlock.php` file located at `your-application/web/modules/changebank/src/Plugin/Block/UserEmailBlock.php` and replace the content with the following code.

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/modules/custom/changebank/src/Plugin/Block/UserEmailBlock.php"}
            lang="php" />


#### Customizing User Login Logout Block

You're going to create a block that will display a login button for anonymous users and a logout button for authenticated users. Select the `UserLoginLogoutBlock.php` file located at `your-application/web/modules/changebank/src/Plugin/Block/UserLoginLogoutBlock.php` and replace the content with the following code.

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/modules/custom/changebank/src/Plugin/Block/UserLoginLogoutBlock.php"}
            lang="php" />


#### Customizing The .Module File

In order to make the blocks available to the application, you need to make some changes to the `changebank.module` file located at `your-application/web/modules/changebank/changebank.module` and add the following.


<RemoteCode url={frontmatter.coderoot + "/complete-application/web/modules/custom/changebank/changebank.module"}
            lang="php" />


#### Enable The Changebank Module

You need to enable the Changebank module. To do so, navigate to http://localhost/admin/modules, while logged in as admin and select the checkbox next to Changebank module item and then click on the <Uielement label="Install"/> button. You can achieve the same by running the following command inside the Drupal docker container:

```bash
vendor/bin/drush pm-enable changebank
```

### Add Styling

In this section you're going to add a theme to the application, along with a couple of templates and some basic styling.

#### Download Theme

Grab a theme called "Barrio Bootstrap 5" which will give a nice starting point for styling the application.
To  do so run the following command from a terminal in `your-application` directory.

```bash
composer require 'drupal/bootstrap_barrio:^5.5'
```

#### Create Subtheme

Next, you're going to create a subtheme of the Barrio Bootstrap 5 theme. In `your-application/web/themes/contrib/bootstrap_barrio` directory you will notice a folder labelled `subtheme`.

From the `your-application` create a directory called `custom`. Inside `custom` create a `subtheme` directory.

```shell
mkdir -p web/themes/custom/subtheme
```

Copy the `your-application/web/themes/contrib/bootstrap_barrio/subtheme` directory into `your-application/web/themes/custom/subtheme`.

```shell
cp -r web/themes/contrib/bootstrap_barrio/subtheme/* web/themes/custom/subtheme
```

Enter the subtheme folder and edit the file labelled `bootstrap_barrio_subtheme.info.yml`. Change the name of the theme from `Bootstrap Barrio Subtheme` to `Changebank` and change the description from `Basic structure for a Bootstrap Barrio SubTheme` to `Subtheme for Changebank`.

#### Enable Theme

Now, you're going to enable the theme.

Navigate to http://localhost/admin/appearance and click on the <Uielement label="Install"/> button for both "Bootstrap Barrio 5.5.14" and "Changebank 5.5.14".

Click on the <Uielement label="Set as default"/> button for "Changebank 5.5.14".

While you are here, add the Changebank logo to your application.

Click on <Uielement label="Settings"/> on Changebank 5.5.14, scroll down and click on <Uielement label="Logo image"/>.
Uncheck the <Uielement label="Use the logo supplied by the theme"/> checkbox and upload the [Changebank logo](https://github.com/FusionAuth/fusionauth-quickstart-php-drupal-web/blob/main/complete-application/web/sites/default/files/changebank-logo.png) in the <Field label="Upload logo image"/> field. Save the configuration.


#### Install & Enable Twig Tweak

You're going to use a module called Twig Tweak to make it easier to render content in the templates you will create later. Twig Tweak is a small module which provides a Twig extension with some useful functions and filters that can improve the developer experience.

Run the following command inside `your-application` directory to download the module:

```bash
composer require 'drupal/twig_tweak:^3.2'
```

Enable the module by navigating to http://localhost/admin/modules and selecting the checkbox next to Twig Tweak and then clicking on the <Uielement label="Install"/> button or you can enable the module by running the following command inside the Drupal docker container:

```bash
vendor/bin/drush pm-enable twig_tweak
```

#### Add Templates

In the subtheme directory of your application, you're going to add a couple of templates that will override the default templates provided by the Bootstrap Barrio theme. This will allow you to customize the markup of the application.

Navigate to `your-application/web/themes/custom/subtheme/templates/`. If the templates directory is not there then you may have to create it.

Inside the templates directory you are going to create the following files:

- `page--front.html.twig`
- `block--system-branding-block.html.twig`
- `region--secondary-menu.html.twig`

The `page--front.html.twig` file uses an image that is currently not in your application so before you add the twig code you can grab the image. Run the following command from `your-application` directory.

```shell
cp ../complete-application/web/sites/default/files/money-new.jpg  web/sites/default/files/money-new.jpg
```

Inside the page template for the front page, denoted by the `page--front.html.twig` filename, add the following:

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/themes/custom/subtheme/templates/page--front.html.twig"}
            lang="twig" />

Next, you're going to add markup to create a custom layout for the site logo, the user email block, and the user login logout block.

Add the following to the `region--secondary-menu.html.twig` template:

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/themes/custom/subtheme/templates/region--secondary-menu.html.twig"}
            lang="twig" />

If the user email and the user login logout blocks are not displaying, or appear broken, make sure that the Twig Tweak module is enabled as that provides the naming convention to embed the blocks in the above template.

Finally, in the code you added the System Branding Block to the secondary menu region template, so you need to manually hide the site name.

Add the following to the `block--system-branding-block.html.twig` template:

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/themes/custom/subtheme/templates/block--system-branding-block.html.twig"}
            lang="twig" />

In the above you simply hid the `site_name`  variable by commenting it out, but you can delete it if you want.

#### Customizing The Stylesheet

Next, you're going to add some styling to the application to make it look a little nicer. Select the `styles.css` file located at `your-application/web/themes/custom/subtheme/css/styles.css` and add the following:

<RemoteCode url={frontmatter.coderoot + "/complete-application/web/themes/custom/subtheme/css/style.css"}
            lang="css" />

### Add Menu

Earlier you created the routes for the form and account page, now you're going to add a menu to the application to make it easier to navigate between the two pages.

Navigate to http://localhost/admin/structure/menu in the administration menu and click on <Uielement label="Add menu"/>.

Set <Field label="Title"/> to `Changebank Menu`  and click on <Uielement label="Save"/>.

Click on <Uielement label="Add link"/> and enter the following:

- <Field label="Menu link title"/> - `Account`
- <Field label="Link"/> - `/account`
- Scroll down and click on <Uielement label="Save"/>.

Click on <Uielement label="Add link"/>  again and enter the following:

- <Field label="Menu link title"/> - `Make Change`
- <Field label="Link"/> - `/makechange`
- Scroll down and click on <Uielement label="Save"/>.

### Enable Blocks

Now that you have the User Email, User Login Logout, and the Changebank Menu Blocks, you need to enable them.

Navigate to http://localhost/admin/structure/block in the administration menu.

#### Enable Changebank Menu Block

Scroll down to the Primary Menu section and click on <Uielement label="Place block"/>.

- Type `Changebank Menu` in the <Field label="Filter"/> field.
- Click on <Uielement label="Place block"/> to place the block into the region.
- Uncheck the <Uielement label="Display title"/> checkbox so as not to display the title.
- Click on the <Breadcrumb label="Roles"/> tab under <Breadcrumb label="Visibility"/> and enable the `Authenticated user` role.
- Click on <Uielement label="Save block"/>.

<Aside type="note">
  Although you set the access restriction to the account and makechange routes to authenticated (logged in) users in your custom module, you also want to make sure that the menu itself is only visible to authenticated users as well.
</Aside>

#### Enable User Email Block

Similar to the Changebank Menu Block, you're going to scroll down to the Secondary Menu section and click on <Uielement label="Place block"/>.

- Type `User Email Block` in the <Field label="Filter"/> field.
- Click on <Uielement label="Place block"/> to place the block into the region.
- Uncheck the <Uielement label="Display title"/> checkbox
- Click on the <Breadcrumb label="Roles"/> tab under <Breadcrumb label="Visibility"/> and enable the `Authenticated user` role.
- Click on <Uielement label="Save block"/>.

#### Enable User Login Logout Block

As with the User Email Block, you're going to scroll down to the Secondary Menu section and click on <Uielement label="Place block"/>.

- Type `User Login Logout Block` in the <Field label="Filter"/> field.
- Click on <Uielement label="Place block"/> to place the block into the region.
- Uncheck the <Uielement label="Display title"/> checkbox.
- Since the visibility of the login and logout links is being controlled in your custom module, you're going to leave the <Breadcrumb label="Roles"/> tab under <Breadcrumb label="Visibility"/> as any role by not selecting any of the choices.
- Click on <Uielement label="Save block"/>.

#### Default Blocks

By default, Drupal will have a Site branding block, a Main navigation block, and a User account block.

You're going to remove the `User account menu` block since you already have custom login/logout links. Click on the dropdown arrow next to the `User account menu` block and click on the <Uielement label="Remove"/> option.

You can disable `Breadcrumbs`. Click on the dropdown arrow next to the `Breadcrumbs` block and click on the <Uielement label="Disable"/> option.

The theme will also have other default blocks such as `Search Form (wide)` and `Search Form (narrow)` located in the Top header form and Sidebar first sections respectively. You're going to remove these as well since you will not be using search functionality in this application, so click on the dropdown arrow next to each block and click on the <Uielement label="Remove"/> option.

You're not using the `Main navigation` for authenticated users so you're going to set that to only be visible to anonymous users. Click on the <Uielement label="Configure"/> link next to the Main navigation block and click on the <Breadcrumb label="Roles"/> tab under <Breadcrumb label="Visibility"/> and select the `Anonymous user` role. Click on <Uielement label="Save block"/> when you are done.

Move the `Site branding` block to the `Secondary Menu` section. You can achieve this by simply dragging and dropping the block into the region. Make sure to position it above the other two blocks and scroll down and click on <Uielement label="Save blocks"/>.

Finally, you only want to display the logo, so configure the `Site branding` block and uncheck the <Uielement label="Site name"/> and <Uielement label="Site slogan"/> checkboxes. Click on <Uielement label="Save block"/>.

### Set Login Redirect

Navigate to http://localhost/admin/config/people/openid-connect where you were earlier to create the client and once again click on the <Breadcrumb label="Settings"/> tab.

Since you have the `/account` route setup in your custom module, let's make sure that the user is redirected to that page after logging in and not the standard user page.

Scroll down to the redirects section and enter `account` in the <Field label="Login"/> redirect field.

Save the configuration and clear the cache. Logout from the application.

## Run The Application

You can now open the application at http://localhost/user/login.

Log in by clicking the <Uielement label="Login with generic"/> button and use the following credentials `richard@example.com` and `password`.

## Next Steps

This quickstart is a great way to get a proof of concept up and running quickly, but to run your application in production, there are some things you're going to want to do.

### FusionAuth Customization

FusionAuth gives you the ability to customize just about everything with the user's experience and your application's integration. This includes

* [Hosted pages](/docs/v1/tech/themes/) such as login, registration, email verification, and many more
* [Email templates](/docs/v1/tech/email-templates/email-templates)
* [User data and custom claims in access token JWTs](/articles/tokens/jwt-components-explained)

### Drupal Customization

Drupal is a very powerful CMS and there are many ways to customize it. Here are a few things you may want to do:

* Increase the functionality of the make change form, such as adding a field for the amount of change to make or specifying the type of change to make (quarters, dimes, nickels, pennies)
* Add additional functionality to the application, such as a way to deposit and withdraw money from the account and keep track of all transactions on the account page.
* Customize the FusionAuth login button.

## Troubleshooting

* I get `This site can’t be reached  localhost refused to connect.` when I click the Login button

Ensure FusionAuth is running in the Docker container.  You should be able to login as the admin user, `admin@example.com` with a password of `password` at [http://localhost:9011/admin](http://localhost:9011/admin).

* I get an error `/usr/bin/env: 'php\r': No such file or directory` when trying to run drush commands.

Incorrect line endings are known to cause this issue. To fix the issue, you need to convert the line endings of the file from Windows to Unix. this can be done by use of the `dos2unix` command. You can install `dos2unix` by running the following command inside the Drupal container:

```shell
apt-get update && apt-get install -y dos2unix
```

Once installed, you can convert the line endings of the file by running the following command inside the Drupal container:

```shell
dos2unix /opt/drupal/vendor/bin/drush
```

* I get the following error during the Drupal installation wizard: `The Settings file does not exist.`

Drupal will try to automatically create a `settings.php` configuration file, which is normally in the directory `sites/default` (to avoid problems when upgrading, Drupal is not packaged with this file). If auto-creation fails, you will need to create this file yourself, using the file `sites/default/default.settings.php` as a template.

Create a settings file by navigating to `your-application/web/sites/default/`, copying `default.settings.php` and renaming it to `settings.php`.
