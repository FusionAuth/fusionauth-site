---
title: Spring Boot with Thymeleaf
description: Quickstart integration of a Spring Boot web application using Thymeleaf with FusionAuth
navcategory: getting-started
prerequisites: Maven, Java
section: web
technology: Spring Boot, Thymeleaf
language: Java
icon: /img/icons/spring.svg
faIcon: fa-leaf
color: green
---
import Aside from '../../components/Aside.astro';
import LoginAfter from '../../diagrams/quickstarts/login-after.astro';
import LoginBefore from '../../diagrams/quickstarts/login-before.astro';
import RemoteCode from '../../components/RemoteCode.astro';
import SpringBootPreReqs from '../../components/quickstarts/springboot-prereqs.mdx';



In this quickstart, you will build a Spring Boot web application and integrate it with FusionAuth. The application is for [ChangeBank](https://www.youtube.com/watch?v=pkH-kD73QUM), a global leader in converting dollars into coins. It will have areas reserved for logged in users and public-facing sections. It uses Spring Boot web and Thymeleaf, and sets up an OAuth authorization code grant flow, allowing users to log into the application.

The docker compose file and source code for a complete application are available at https://github.com/FusionAuth/fusionauth-quickstart-springboot-web

## Prerequisites

<SpringBootPreReqs/>


## General Architecture

While this sample application doesn't have login functionality without FusionAuth, a more typical integration will replace an existing login system with FusionAuth.

In that case, the system might look like this before FusionAuth is introduced.

<LoginBefore alt={"Request flow during login before FusionAuth"}/>

The login flow will look like this after FusionAuth is introduced.

<LoginAfter alt={"Request flow during login after FusionAuth"}/>

In general, you are introducing FusionAuth in order to normalize and consolidate user data. This helps make sure it is consistent and up-to-date as well as offloading your login security and functionality to FusionAuth.


## Getting Started

Start with getting FusionAuth up and running and creating Spring Boot Application with Thymeleaf.

### Clone The Code

First, grab the code from the repository and change into that directory.

```
git clone https://github.com/FusionAuth/fusionauth-quickstart-springboot-web.git
cd fusionauth-quickstart-springboot-web
```

### Run FusionAuth Via Docker

You'll find a Docker Compose file `docker-compose.yml` and an environment variables configuration file `.env` in the root directory of the repo.

Assuming you have Docker installed on your machine, you can start FusionAuth with the following.

```
docker-compose up -d
```

This will start three containers, one for FusionAuth, another for Postgres, and a third for Elastic Search.

The FusionAuth configuration files make use of a unique feature of FusionAuth, called [Kickstart](/docs/v1/tech/installation-guide/kickstart). When FusionAuth starts for the first time, it will look at the `kickstart/kickstart.json` file and configure FusionAuth to your specified state.

<Aside type="note" >If you ever want to reset the FusionAuth system, delete the volumes created by docker-compose by executing `docker-compose down -v`, then rerun `docker-compose up -d`.</Aside>

FusionAuth will be initially configured with these settings:

* Your client Id is: `e9fdb985-9173-4e01-9d73-ac2d60d1dc8e`
* Your client secret is: `super-secret-secret-that-should-be-regenerated-for-production`
* Your example username is `richard@example.com` and your password is `password`.
* Your admin username is `admin@example.com` and your password is `password`.
* Your fusionAuthBaseUrl is `http://localhost:9011/`.

You can log into the [FusionAuth admin UI](http://localhost:9011/admin) and look around if you want to, but with Docker and Kickstart, everything will already be configured correctly.

<Aside type="caution">
  The `.env` and `kickstart.json` files contain passwords. In a real application, always add these files to your `.gitignore` file and never commit secrets to version control.
</Aside>

## Create Your Spring Boot Application With Thymeleaf

### Overview Of The Application

We are going to be building a version of the ChangeBank app. This app will allow you to log in and see your "balance", as well as present a page that you can input a dollar amount and have that broken into change of dimes and pennies. You won't be keeping track of any account state beyond the user in FusionAuth, so the only actual functionality you will implement is the api call to make change.

You are going to build an application with three views:
- `Home`: This is the welcome page that an unauthenticated user will see when first visiting your application.
- `Account`: This is a protected view the user can only see after they have logged in.
- `Make Change`: This view is also protected and demonstrates making an authenticated form post to the backend.

### Downloading The Template From Spring Initializr

We have already done this for you in the example repository, but if you wish to do so yourself you can go to the Initializr site at https://start.spring.io/ and download your own starter package. We will rely on three dependencies for this project:

- OAuth2 Client
- Thymeleaf
- Spring Web

This example was made with `Maven`, Spring Boot version `2.7.12`, and Java `17`. If you choose different options the configuration and code may be different.

If you choose you can download and unzip the package in any directory you wish and proceed to follow along with the rest of this guide. The directions will assume you are in `stub-application` from the example repository. Please substitute that directory with wherever you unzipped the files from Spring if you downloaded your own starter.

### Install the dependencies

From the `stub-application` directory run the following to execute the Maven build tool to download dependencies and build your application.

```shell
./mvnw package
```

<Aside type="note">If you are on Windows substitute `./mvnw` with `.\mvnw.cmd`.</Aside>


### Configure Spring Application Properties

From the `stub-application` directory open `src/main/resources/application.properties` and add the following.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/resources/application.properties"
            lang="ini"/>

The properties with the `spring.thymeleaf` prefix enable Thymeleaf for server-side template rendering and defines the location and suffix of the template files.

The `spring.application.name` property defines the app name, which will show up in your application view.

The properties with the `spring.security.oauth2.client.registration` prefix configure the settings for the OAuth2 Client. The `client-id`, `client-secret`, `redirect-uri` and `authorization-grant-type` all need to match what is configured in FusionAuth. If you used the Kickstart method these settings should be correct, however if they are not you can log in to [FusionAuth admin UI](http://localhost:9011/admin) and check the [OAuth Settings](/docs/v1/tech/core-concepts/applications#oauth) for your application.

The properties with the `spring.security.oauth2.provider` prefix tell Spring where the important endpoints for FusionAuth are.

### Add controllers

Find the `base directory` where the main application java class is defined. In our example this is `src/main/java/io/quickstart/springweb` and the main class is `FusionAuthSpringApplication.java`.

<Aside type="note">If you downloaded your own starter you will need to update the `package` for the code snippets below to match your own.</Aside>

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/java/io/fusionauth/quickstart/springweb/FusionAuthSpringApplication.java"
            lang="java"/>

Create the following `HomeController.java` java class in the `src/main/java/io/quickstart/springweb` directory.


<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/java/io/fusionauth/quickstart/springweb/HomeController.java"
            lang="java"/>

This controller serves the page for unauthenticated users on the `/` route and shows the application name which is injected from the `spring.application.name` property in the `application.properties` file. The return string `home` tells Spring to render the `home.html` template.

Create the following `AccountController.java` java class in the `src/main/java/io/quickstart/springweb` directory.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/java/io/fusionauth/quickstart/springweb/AccountController.java"
            lang="java"/>

This controller serves the page for authenticated users on the `/account` route and adds the claims from the `OidcUser` returned from FusionAuth to the view model on the `profile` attribute (more on that later). The return string `account` tells Spring to render the `account.html` template.

Create the following `MakeChangeController.java` java class in the `src/main/java/io/quickstart/springweb` directory.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/java/io/fusionauth/quickstart/springweb/MakeChangeController.java"
            lang="java"/>

This controller serves both GET and POST requests on the `/make-change` route. Both methods add the claims to the `profile` attribute like `AccountController.java` does. The `GetMapping` adds a new model object of `Change` to view model as well. The `PostMapping` takes the `Change` object as a parameter and uses the `total` to calculate how many nickels and pennies to return. If `total` is not a valid dollar (BigDecimal) value it adds an error to the Change model object. The return string `make-change` tells Spring to render the `make-change.html` template.

### Add the model object

We need to create the model object referenced in the controllers. In the `base directory` which for this case is `src/main/java/io/quickstart/springweb`, create a new directory `model` and in it add a new class `Change.java`.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/java/io/fusionauth/quickstart/springweb/model/Change.java"
            lang="java" />

This model has four fields.
- `error`: The error string if the input was invalid.
- `total`: The total amount to divide into pennies and nickels.
- `nickels`: The number of pennies returned from the "make change" operation.
- `pennies`: The number of pennies returned from the "make change" operation.

It additionally has a method `getMessage` which formats a message string to render on the template.

### Add view templates

Now you need to add some views for Thymeleaf to render on the routes you just defined. Add template files into `src/main/resources/templates`.

Create the `home.html` template file.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/resources/templates/home.html"
            lang="html" />

Note that this template links to `/account` for login. Spring will automatically know that the user is not logged in and redirect them to FusionAuth based on what was defined in `application.properties`.

Create the `account.html` template file.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/resources/templates/account.html"
            lang="html" />

Similarly, this page has a href to `/logout` that Spring will use to redirect the user to FusionAuth for logout. It also references the `${profile.email}` claim that was set in controller.

Create the `make-change.html` template file.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/resources/templates/make-change.html"
            lang="html" />

In addition to the references made above, this template adds a form which binds the `${change}` object as the model, submits the `*{total}` as input by the user, and displays the message or error depending on what is defined in the `Change` object.

### Add static assets

There are some references to a stylesheet and images in the templates above.

In `src/main/resources/static/images` you can download the [bank logo image](https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/resources/static/images/example_bank_logo.svg) as `example_bank_logo.svg` and the [money image](https://github.com/FusionAuth/fusionauth-quickstart-springboot-web/blob/main/complete-application/src/main/resources/static/images/money.jpg) as `money.jpg`.

In `src/main/resources/static/css` you should add `styles.css` from [the example styles](https://github.com/FusionAuth/fusionauth-quickstart-springboot-web/blob/main/complete-application/src/main/resources/static/css/styles.css) or write your own.

Feel free to update and style as you see fit, just be sure to update the templates if you make changes.

### Configure Spring Web and Spring Security

In order for this application to work you will need two more configuration java classes. From the `base directory` add a new directory `config` and in it add the following:

Create a java class `SecurityConfiguration.java`.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/java/io/fusionauth/quickstart/springweb/config/SecurityConfiguration.java"
            lang="java" />

This class uses the `@Configuration` annotation to tell Spring it is providing additional configuration, in this case a `SecurityFilterChain` which ultimately does two things:

- Tells Spring to require authentication for all requests *except* to `/` (i.e. `home.html`), `/images`, and `/css` (implicitly referring to the directories under `src/main/resources/static`).
- Tells Spring to redirect the user on logout to FusionAuth to complete the logout.

Create a java class `WebConfig.java`.

<RemoteCode url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-springboot-web/main/complete-application/src/main/java/io/fusionauth/quickstart/springweb/config/WebConfig.java"
            lang="java" />

This configuration class enables web mvc and sets up resource handlers for the static assets.

### Run the app

Now from the root directory run

```shell
./mvnw spring-boot:run
```

You can open the application at http://localhost:8080.

Log in using `richard@example.com` and `password`.

## Next Steps

This quickstart is a great way to get a proof of concept up and running quickly, but to run your application in production, there are some things you're going to want to do.

### FusionAuth Customization

FusionAuth gives you the ability to customize just about everything to do with the user's experience and the integration of your application. This includes:
* [Hosted pages](/docs/v1/tech/themes/) such as login, registration, email verification, and many more.
* [Email templates](/docs/v1/tech/email-templates/email-templates).
* [User data and custom claims in access token JWTs](/articles/tokens/jwt-components-explained).

### Security

* You may want to customize the [token expiration times and policies](/docs/v1/tech/oauth/#configure-application-oauth-settings) in FusionAuth.
* Choose [password rules](/docs/v1/tech/core-concepts/tenants#password) and a [hashing algorithm](/docs/v1/tech/reference/password-hashes) that meet your security needs.

### Tenant and Application Management

* Model your application topology using [Applications](/docs/v1/tech/core-concepts/applications), [Roles](/docs/v1/tech/core-concepts/roles), [Groups](/docs/v1/tech/core-concepts/groups), [Entities](/docs/v1/tech/core-concepts/groups), and more.
* Set up [MFA](/docs/v1/tech/guides/multi-factor-authentication), [Social login](/docs/v1/tech/identity-providers/), or [SAML](/docs/v1/tech/identity-providers/samlv2/) integrations.
* Integrate with external systems using [Webhooks](/docs/v1/tech/events-webhooks/), [SCIM](/docs/v1/tech/core-concepts/scim), and [Lambdas](/docs/v1/tech/lambdas/).
