import InlineField from "src/components/InlineField.astro";
import Breadcrumb from 'src/components/Breadcrumb.astro';

If you are building your own login experience, you'll want to start the identity provider flow yourself and then complete the login. 

You might do this if you are using the [Login API](/docs/apis/login) rather than using the hosted FusionAuth login pages. Here's a diagram illustrating this login flow:

```mermaid
sequenceDiagram
    participant User as User/Browser
    participant App
    participant FusionAuth
    participant IdentityProvider as Provider

    User ->> App : View Initial Page<br/>Click Login
    App ->> User : Displays Login Page<br/>Including Link To 'Login With Provider'
    User ->> App : Clicks On 'Login With Provider'
    App ->> User : Redirect To Provider Authorization URL
    User ->> IdentityProvider : Enters Credentials
    IdentityProvider ->> IdentityProvider : Validate Credentials
    IdentityProvider ->> User : Redirect to App With Authorization Code
    User ->> App : Requests Page, Has Authorization Code
    App ->> FusionAuth : Calls Complete Login<br/>With Code And Redirect URI
    FusionAuth ->> IdentityProvider : Exchanges Code And<br/>Redirect URI For Provider Token
    IdentityProvider ->> FusionAuth : Returns Provider Token
    FusionAuth ->> FusionAuth : Stores Provider Token, Calls Lambda, Creates User And Registrations (If Needed), Generates FusionAuth Tokens
    FusionAuth ->> App : Return FusionAuth Tokens
    App ->> App : Create Session Or<br/>Otherwise Log User In
    Note over User, IdentityProvider: User Is Logged In And App Can Proceed<br/>Delivering Data And Functionality
```

If you require a refresh token after completing the login, ensure <InlineField>Enable JWT Refresh</InlineField> is ``true`` in the application configuration. This is found in the administrative user interface by navigating to <Breadcrumb>Applications -> Your Application -> Security -> Login API settings</Breadcrumb>.


