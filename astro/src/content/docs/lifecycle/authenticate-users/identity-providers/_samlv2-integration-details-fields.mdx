import APIBlock from 'src/components/api/APIBlock.astro';
import APIField from 'src/components/api/APIField.astro';
import InlineField from 'src/components/InlineField.astro';

<APIBlock>
  <APIField name="IdP Initiated Callback URLs (ACS)" renderif={props.idp_init}>
    An Assertion Consumer Service (or ACS) is the location at a service provider that accepts messages to establish a session based on the assertion.

    By default the redirect URI will be the first Authorized redirect URI found in the FusionAuth Application OAuth configuration. To specify a redirect URI send the authorized URI in the `RelayState` parameter. Support for using the `RelayState` in this manner is supported in FusionAuth version greater than or equal to `1.41.0`. In prior versions, append a query parameter named `redirect_uri` to the ACS in the IdP configuration.

    This field will only be present if you have `Enable IdP initiated login` toggled on for this identity provider.

    Note: IdP initiated logins go through a separate endpoint from SP initiated logins. For IdP initiated logins in order to receive a refresh token the query parameter `?scope=offline_access` will need to be appended to the url. When logging into the FusionAuth Admin application this parameter is included by default and does not need to be supplied.
  </APIField>
  <APIField name="Callback URL (ACS)" renderif={props.idp_init}>
    This is the Assertion Consumer Service (ACS) endpoint for SP initiated logins and otherwise follows the same rules as `IdP Initiated Callback URLs (ACS)`.
  </APIField>

  <APIField name="Callback URL (ACS)" renderif={!props.idp_init}>
    An Assertion Consumer Service (or ACS) is the location at a service provider that accepts messages to establish a session based on the assertion.

    By default the redirect URI will be the first Authorized redirect URI found in the FusionAuth Application OAuth configuration. To specify a redirect URI send the authorized URI in the `RelayState` parameter. Support for using the `RelayState` in this manner is supported in FusionAuth version greater than or equal to `1.41.0`. In prior versions, append a query parameter named `redirect_uri` to the ACS in the IdP configuration.

    Note: For IdP initiated logins in order to receive a refresh token the query parameter `?scope=offline_access` will need to be appended to the url. When logging into the FusionAuth Admin application this parameter is included by default and does not need to be supplied.
  </APIField>

  <APIField name="Issuer">
    The service provider EntityId. This is a URL.
  </APIField>

  <APIField name="Metadata URL">
    The URL where the service provider metadata resides.
  </APIField>
</APIBlock>
