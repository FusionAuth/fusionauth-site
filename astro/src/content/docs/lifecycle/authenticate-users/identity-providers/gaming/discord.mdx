---
title: OpenID Connect with Discord
description: Learn how to set up user log in using Discord as an OpenID Connect Identity Provider.
navcategory: login-methods
section: lifecycle
subcategory: authenticate users
tertcategory: identity providers
quatercategory: gaming
---
import Breadcrumb from 'src/components/Breadcrumb.astro';
import {Content as IdentityProviderOverviewDiagram} from 'src/content/docs/_shared/_identity-provider-overview-diagram.mdx';
import InlineField from 'src/components/InlineField.astro';
import InlineUIElement from 'src/components/InlineUIElement.astro';

## Configure OpenID Connect with Discord

Once you have completed this configuration you may enable an OpenID Connect <InlineUIElement>Login with Discord</InlineUIElement> button for one or more FusionAuth Applications. See [Discord - OAuth2](https://discord.com/developers/docs/topics/oauth2/) for an additional reference.

<img src="/img/docs/lifecycle/authenticate-users/identity-providers/gaming/discord-openid-connect-login.png" alt="Login with Discord" width="1200" role="shadowed" />

<IdentityProviderOverviewDiagram identity_provider_name="Discord" />

### Register a Discord OAuth2 Application

First, log in to [Discord](https://discord.com/developers/applications/). Then, navigate to [https://discord.com/developers/applications/](https://discord.com/developers/applications/) and create a new application.

<img src="/img/docs/lifecycle/authenticate-users/identity-providers/gaming/discord-openid-connect-client-id-secret.png" alt="Discord Client ID and Secret" width="1200" role="shadowed" />

Finally, configure OAuth2 for your Discord app by opening <Breadcrumb>Selected App -> Settings -> OAuth2</Breadcrumb> in the navigation pane on the left side of the screen.

<img src="/img/docs/lifecycle/authenticate-users/identity-providers/gaming/discord-openid-connect-register-application.png" alt="Register a new Discord OAuth Application" width="1200" />

To configure the callback URL for your application, add `/oauth2/callback` to the URL for your instance of FusionAuth. In the screenshot, FusionAuth is running at `https://login.piedpiper.com` so the redirect URL is `https://login.piedpiper.com/oauth2/callback`.

Note the `CLIENT ID` and the `CLIENT SECRET` after the application is created. You'll use these to configure the <InlineField>Client Id</InlineField> and <InlineField>Client secret</InlineField> values for your FusionAuth OpenID Connected Identity Provider.

### Configure a New FusionAuth OpenID Connect Identity Provider

To create a Discord Identity Provider, open FusionAuth, navigate to <Breadcrumb>Settings -> Identity Providers</Breadcrumb>, and click <InlineUIElement>Add OpenID Connect</InlineUIElement>.

On the `Add OpenID Connect` screen fill out the required fields:

* <InlineField>Client Id</InlineField> and <InlineField>Client secret</InlineField> use the `CLIENT ID` and `CLIENT SECRET` values that you noted earlier.
* <InlineField>Redirect URL</InlineField> is generated for you and is based on the URL for the instance FusionAuth. The value must match the redirect URL for your Discord application that you configured previously.

Next, disable the <InlineField>Discover endpoints</InlineField> field as Discord doesn't implement a well-known configuration endpoint. Instead, add the endpoints manually. The values for the fields are:

* `Authorization endpoint` - `https://discord.com/api/oauth2/authorize`
* `Token endpoint` - `https://discord.com/api/oauth2/token`
* `Userinfo endpoint` - `https://discord.com/api/users/@me`

In the <InlineField>Scope</InlineField> field for your application specify the scopes `identify` and `email`. Also, set <InlineField>Client authentication method</InlineField> to `Request body (client_secret_post)`, as Discord expects the `client_secret` in the request body of the authentication request.

Discord doesn't use the standard email identity claims. Open the <Breadcrumb>Options</Breadcrumb> tab and update the <InlineField>Unique Id Claim</InlineField> field to `id` and the <InlineField>Email verified claim</InlineField> field to `verified`.

<img src="/img/docs/lifecycle/authenticate-users/identity-providers/gaming/discord-change-unique-claim.png" alt="FusionAuth Discord Change Claim" width="1200" role="top-cropped" />

The <Breadcrumb>Applications</Breadcrumb> tab at the bottom of the screenshot below shows that the identity provider is enabled for the `Pied Piper` application. In addition, <InlineField>Create registration</InlineField> is also enbabled.

The Discord implementation of OpenID Connect doesn't currently follow the full specification. You can optionally populate additional data for the user profile, such as the Discord username and avatar URL, by enabling an <InlineField>Reconcile lambda</InlineField>. See [the lambda documentation](/docs/extend/code/lambdas/openid-connect-response-reconcile) for more information.

That's it, now the <InlineUIElement>Login with Discord</InlineUIElement> button will show up on the login page of our `PiedPiper` application.

The following image shows the upper portion of the discord Identity Provider configuration:

<img src="/img/docs/lifecycle/authenticate-users/identity-providers/gaming/top-discord-openid-connect-configuration.png" alt="FusionAuth Discord IdP Configuration" />

And here is an image with the lower portion of the discord Identity Provider configuration:

<img src="/img/docs/lifecycle/authenticate-users/identity-providers/gaming/bottom-discord-openid-connect-configuration.png" alt="FusionAuth Discord IdP Configuration" />
