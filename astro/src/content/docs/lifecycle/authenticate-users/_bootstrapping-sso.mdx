---
---
import Aside from 'src/components/Aside.astro';
import InlineField from 'src/components/InlineField.astro';

<Aside type="version">Available in FusionAuth 1.56.0</Aside>

In certain scenarios you may have authenticated a user outside of the typical OAuth flow. If so, you can still acquire an SSO session from FusionAuth as long as you have a valid access token for the user.

These are one-time setup steps in order to enable this feature:

* Enable the access token bootstrap setting on the tenant via the <InlineField>Allow access token bootstrap</InlineField> setting in the [Admin UI](/docs/get-started/core-concepts/tenants#oauth) or by setting the <InlineField>tenant.ssoConfiguration.allowAccessTokenBootstrap</InlineField> field to `true` in the [Tenant API](/docs/apis/tenants).
* You will need to configure a reverse proxy to add the required `Authorization` header.

While the implementation of your reverse proxy is out of scope, a common scenario would be that you already have an HTTP only secure cookie that holds the user's access token. In this example, the reverse proxy can copy that cookie value into the `Authorization` header as it passes through.

![Advanced SSO settings with allow access token bootstrap.](/img/docs/lifecycle/authenticate-users/oauth-access-token-bootstrap.png)

Follow these steps to setup the request to bootstrap the SSO session for a given user:

* Build the Authorize request as you normally would when redirecting to the [OAuth Authorize](/docs/lifecycle/authenticate-users/oauth/endpoints#authorize) endpoint. The host and path may very based upon your proxy configuration, but the query parameters should be the same as a normal request to this endpoint.
* Intercept this request, adding the access token to the `Authorization` header using the `Bearer` scheme.
* Forward the request the FusionAuth Authorize endpoint `/oauth2/authorize`.

The following is an example Authorization header using the Bearer scheme:

```
Authorization: Bearer <access token>
```

If the token is valid, FusionAuth will create an SSO session and complete the requested grant by redirecting to the authorized redirect specified by the `redirect_uri` request parameter. Separate from the session being created, all of the OAuth2 parameter validation is the same as a normal request.

Note that FusionAuth adds the `auth_time` claim to the access token. If you remove this claim from the access token it cannot be used to bootstrap a SSO session.
