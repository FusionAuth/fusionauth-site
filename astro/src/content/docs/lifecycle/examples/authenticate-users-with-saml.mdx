---
title: Authenticate Users With SAML
description: How to authenticate users with SAML in FusionAuth
navcategory: developer
section: lifecycle
subcategory: examples
---

import EnterprisePlanBlurb from 'src/content/docs/_shared/_enterprise-plan-blurb.astro';
import Breadcrumb from 'src/components/Breadcrumb.astro';
import InlineField from 'src/components/InlineField.astro';
import InlineUIElement from 'src/components/InlineUIElement.astro';
import Aside from 'src/components/Aside.astro';


- [Authentication Flow Of The Examples](#authentication-flow-of-the-examples)
- [Example 1: Use FusionAuth As A SAML Identity Provider](#example-1-use-fusionauth-as-a-saml-identity-provider)
  - [Run FusionAuth And The Initial Website](#run-fusionauth-and-the-initial-website)
  - [Configure FusionAuth To Use SAML](#configure-fusionauth-to-use-saml)
  - [Configure The Website To Use SAML](#configure-the-website-to-use-saml)
  - [Log In With SAML](#log-in-with-saml)
  - [Explanation Of The New Code](#explanation-of-the-new-code)
- [Example 2: Use FusionAuth As A SAML Service Provider](#example-2-use-fusionauth-as-a-saml-service-provider)
  - [Run FusionAuth And The Initial Website](#run-fusionauth-and-the-initial-website-1)
  - [Configure Okta To Use SAML](#configure-okta-to-use-saml)
  - [Configure FusionAuth To Use SAML](#configure-fusionauth-to-use-saml-1)
  - [Log In With SAML](#log-in-with-saml-1)
  - [Remove OAuth Login Option](#remove-oauth-login-option)
- [Clean Up](#clean-up)
- [TODO](#todo)

<EnterprisePlanBlurb />

This guide shows you how to authenticate users with SAML via FusionAuth with a full code example. To learn more about SAML in general, please see the [FusionAuth SAML overview](https://fusionauth.io/docs/lifecycle/authenticate-users/saml).

Consider the following example. You provide a financial service on the Internet to users who log in to your website, called Changebank.com. Until now, the website has managed its own user authentication with usernames and passwords. You haven't used FusionAuth before. You have a new corporate client, called Corpo.com, who wants all its employees to use your service, but authentication will be done with SAML, using Corpo as the identity provider (the party that holds the database of users). FusionAuth can be used to add this SAML authentication to your website. In this case FusionAuth will be used only as a service provider (requesting party), not an identity provider.

Let's also consider the possibility that the Corpo.com is happy to let your website act as the identity provider, as long as SAML is used. In either case, you'll use FusionAuth to manage SAML, hiding the complexity of the protocol from your website.

<Aside type="tip">
If you use FusionAuth with corporate software, you might also want to provision users automatically. To learn how to use SMIL to do this, please see the article here.
</Aside>

## Authentication Flow Of The Examples

Before configuring FusionAuth to support these examples, let's look at how the SAML authentication process works. If you used OAuth before, the flow is almost identical — it's only the underlying implementation that differs between OAuth and SAML.

First, consider the simple case when your website, Changebank.com, does its own authentication, shown below. Only two parties are involved: the user and the website.

```mermaid
sequenceDiagram
  actor User
  User->>Changebank: Browse to login page
  activate Changebank
  User->>Changebank: Send username & password
  Note right of Changebank: Authenticate user
  Changebank->>User: Redirect user to account page
  deactivate Changebank

  User->>Changebank: Request account page
  activate Changebank
  Changebank->>User: Return account page
  deactivate Changebank
```

Next, consider using FusionAuth as the SAML identity provider for login. Instead of letting the user log in on your site, you'll redirect them to FusionAuth to log in, where an identifying cookie will be stored in their browser, and they'll be sent back to your site. Using FusionAuth as a SAML identity provider is documented [here](https://fusionauth.io/docs/lifecycle/authenticate-users/saml). The flow below will look familiar to anyone who has used OAuth before.

```mermaid
sequenceDiagram
  actor User

  User->>Changebank: Browse to login page
  activate Changebank
  Changebank->>User: Redirect to FusionAuth SAML login page
  deactivate Changebank

  User->>FusionAuth: Send username & password
  activate FusionAuth
  Note right of FusionAuth: Authenticate user
  FusionAuth->>User: Redirect user to Changebank callback page
  deactivate FusionAuth

  User->>Changebank: Request callback page
  activate Changebank
  Note right of Changebank: Check authentication cookie
  Changebank->>User: Redirect to account page
  deactivate Changebank

  User->>Changebank: Request account page
  activate Changebank
  Changebank->>User: Return account page
  deactivate Changebank
```

Finally, consider the Corpo.com original business request — that Corpo acts as the identity provider. In this case, there are four parties: the user, Changebank, FusionAuth acting as a service provider, and Corpo acting as the identity provider. The authentication flow now is similar to other flow above, with one more level of redirection.

Using FusionAuth as a service provider to connect to another identity provider is documented [here](https://fusionauth.io/docs/lifecycle/authenticate-users/identity-providers/overview-samlv2).

```mermaid
sequenceDiagram
  actor User

  User->>Changebank: Browse to login page
  activate Changebank
  Changebank->>User: Redirect to FusionAuth OAuth login page
  deactivate Changebank

  User->>FusionAuth: Request OAuth login page
  activate FusionAuth
  Note right of FusionAuth: User clicks "Log in with SAML"
  FusionAuth->>User: Redirect user to Corpo SAML login page
  deactivate FusionAuth

  User->>Corpo: Send username & password
  activate Corpo
  Note right of Corpo: Authenticate user
  Corpo->>User: Redirect user to FusionAuth callback page
  deactivate Corpo

  User->>FusionAuth: Request callback page
  activate FusionAuth
  Note right of FusionAuth: Check authentication cookie
  Note right of FusionAuth: Register user in database
  FusionAuth->>User: Redirect to Changebank callback page
  deactivate FusionAuth

  User->>Changebank: Request callback page
  activate Changebank
  Note right of Changebank: Check authentication cookie
  Changebank->>User: Redirect to account page
  deactivate Changebank

  User->>Changebank: Request account page
  activate Changebank
  Changebank->>User: Return account page
  deactivate Changebank
```

In all the cases above, if the user already has an authentication cookie for the website, the login page will be bypassed and the user will be redirected to their account page.

## Example 1: Use FusionAuth As A SAML Identity Provider

In this section, you'll configure FusionAuth as the SAML identity provider, where users do not have to log in with Corpo.com. This is simpler than using FusionAuth as a service provider, which is done in the next section by extending the example in this section.

### Run FusionAuth And The Initial Website

Start by running a new instance of FusionAuth and configuring it to use SAML. For compatibility with any operating system and safety, you'll run all code inside [Docker](https://www.docker.com/get-started/).

- Use `git clone` to clone the repository at https://github.com/FusionAuth/fusionauth-example-saml, or download and unzip it.
- Open a terminal in the directory containing the repository files.
- Run the command below to start FusionAuth.
  ```sh
  docker compose up
  ```

This command started FusionAuth using Kickstart, which automatically creates an example application with example users. Using Kickstart saves you the time of having to configure everything yourself when following this tutorial.

<Aside type="note">
If you have completed any FusionAuth tutorials before, you might need to first delete any existing FusionAuth containers with the same name and the database volumes. Run the command below to do that.

```sh
docker rm fa fa_db; docker network remove faNetwork; docker compose down -v
```
</Aside>

<Aside type="note">
If you have any trouble with this tutorial, try replacing the FusionAuth image in the Docker compose file with `fusionauth/fusionauth-app:1.54.0`, in case future versions of FusionAuth introduced a breaking change.
</Aside>

In addition to FusionAuth, there are two websites included in this repository. You'll work with the first one, `appIdP`, in this section and then `appSP` in the next section. `appIdP` represents the Change bank website your company owns in this example, where FusionAuth is the identity provider. The site currently uses OAuth for login, not bespoke authentication, which is slightly different from the example description, but unimportant — the focus of this example is switching the site to use SAML authentication.

Look at how the website currently looks before adding SAML.

- Open a new terminal and run the commands below.
  ```sh
  cd appIdP

  docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app"  node:23-alpine3.19 sh -c  "npm install"

  docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app" --name app --network faNetwork  -p 3000:3000 node:23-alpine3.19 sh -c  "npm run start"
  ```

These commands will install the Node.js packages in `package.json` and run the Express.js web server on the same network as the FusionAuth server in the Docker file, `faNetwork`.

- Browse to http://localhost:3000.
- Log in to the Changebank website with `richard@example.com` and `password`.

![Change bank account page](../../../../../public/img/docs/lifecycle/examples/saml/accountIdp.webp)

### Configure FusionAuth To Use SAML

Configure FusionAuth to use SAML as an identity provider for the Changebank application in the FusionAuth web interface.

- Log in to your FusionAuth web interface at http://localhost:9011/admin with credentials `admin@example.com` and `password`.
- Browse to <Breadcrumb>Reactor</Breadcrumb>.
- Enter your license key to activate Reactor and refresh the page.
- Browse to <Breadcrumb>Applications -> Changebank -> Select -> Edit -> SAML tab</Breadcrumb>.
  - Enable <InlineUIElement>Enabled</InlineUIElement>
  - Set <InlineField>Issuer</InlineField> to `passport-saml`.
  - Set <InlineField>Authorized redirect URLs</InlineField> to `http://localhost:3000/saml/callback` (be sure to click the dropdown text that appears to confirm the entry).
  - Enable <InlineUIElement>Debug enabled</InlineUIElement>.
  - Save.
  ![SAML setup](../../../../../public/img/docs/lifecycle/examples/saml/saml.webp)
- Click <InlineUIElement>Select -> View</InlineUIElement> for the application to see the SAML endpoints. They should like the ones below.
  ![SAML settings](../../../../../public/img/docs/lifecycle/examples/saml/samlSettings.webp)

### Configure The Website To Use SAML

FusionAuth is now ready to accept SAML logins. Next is to add the callback URL above as a page in the existing website, to configure SAML on the website, and reference FusionAuth's SSL certificate to ensure security.

The existing code in `appIdP` uses three main files: `services/authentication.js`, which uses Passport.js to manage OAuth, `routes/index.js`, which handles HTTP requests to HTML templates or authentication callbacks, and `app.js`, which loads both of these files into Express.js.

To add SAML, you'll add the Passport strategy for SAML to `authentication.js` and add login and callback routes to `index.js`. (The npm packages are already in the package file).

<Aside type="tip">
If you have trouble following the code changes presented below, you can copy the final example from `completedApps/appIdP` to `appIdP`, where all the work has already been done for you.

You still need to update `cert/cert.pem` and the SAML URL in `.env` though.
</Aside>

- Browse to the `Metadata URL` endpoint from the SAML details above, http://localhost:9011/samlv2/metadata/d7d09513-a3f5-401c-9685-34ab6c552453. If your URL UUID is different, use your one.
- Copy the text in between the tags labelled `<X509Certificate>` and paste it into into a file named `appIdP/cert/cert.pem`. Add the line `-----BEGIN CERTIFICATE-----` above the text and the line `-----END CERTIFICATE-----` below it, and save the file.
- Add the `Login URL` below from the SAML metadata to `appIdP/.env`
  ```
  SAML_URL="http://localhost:9011/samlv2/login/d7d09513-a3f5-401c-9685-34ab6c552453"
  ```
- Add the line below to the top of the `dependencies` section of `package.json`.
  ```
  "@node-saml/passport-saml": "^5.0.0",
  ```
- Add the lines below to the top of `appIdP/services/authentication.js`.
  ```js
  const SamlStrategy = require("passport-saml").Strategy;
  const fs = require('fs');
  ```
- In the same file, add the line below to the end of the `setupPassport` function.
  ```js
    setupSaml(passport);
  ```
- At the end of the same file, add the function below.
  ```js
  function setupSaml(passport) {
    const samlOptions = {
      path: "/saml/callback",
      callbackUrl: "http://localhost:3000/saml/callback",
      entryPoint: process.env.SAML_URL,
      issuer: "passport-saml",
      cert: fs.readFileSync('cert/cert.pem', 'utf8'),
      idpCert: fs.readFileSync('cert/cert.pem', 'utf8'),
      wantAuthnResponseSigned: false,
      wantAssertionsSigned: true
    };
    passport.use(
      "saml",
      new SamlStrategy(
        samlOptions,
        function (user, callback) { callback(null, user); }, //for signon
        function (user, callback) { callback(null, user); }  //for logout
      )
    );
  }
  ```
- In middle of the file `appIdP/routes/index.js` replace the current OAuth login line with a SAML login.
  ```js
  // router.get("/login", passport.authenticate("oauth2"));

  router.get("/login", passport.authenticate("saml", { failureRedirect: "/", failureFlash: true }), function (req, res) {res.redirect("/");});

  router.post("/saml/callback",
    bodyParser.urlencoded({ extended: false }),
    passport.authenticate("saml", {
      failureRedirect: "/",
      failureFlash: true,
    }),
    function (req, res, next) {
      res.redirect("/account");
    }
  );
  ```

### Log In With SAML

- In the website terminal (in the `appIdP` directory), push <kbd>Ctrl</kbd>+<kbd>c</kbd>, and run the Node commands again to install the new SAML package and restart the webserver.
  ```sh
  docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app"  node:23-alpine3.19 sh -c  "npm install"

  docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app" --name app --network faNetwork  -p 3000:3000 node:23-alpine3.19 sh -c  "npm run start"
  ```

You can now browse to http://localhost:3000 and log in in exactly the same way as before, except you're now using SAML. If you see `oauth` in the browser address bar, don't worry, FusionAuth translates SAML to OAuth calls internally before returning.

### Explanation Of The New Code

SAML is more strict with security certificates than OAuth. You needed to copy the certificate from FusionAuth into your website in order for SAML to trust it.

In the authentication JavaScript file, you added SAML as a strategy. Passport.js can use multiple strategies, so you didn't need to remove OAuth. Each strategy is identified by a different label, like `saml`. The `setupSaml` function sets some options to match the settings in the SAML data from FusionAuth. The function then instantiates the new Passport SAML strategy with two functions that handle what happens to the user profile returned from the identity provider. You can process the user further in these functions, like saving her to a database, but here you are doing nothing except saying you are done. Express session storage (`express-session`) is already being used to store the user profile in a cookie that is sent to the user's browser.

The code changes to the routes file are minimal, barely changing what is in the Passport documentation. You comment out the OAuth login route because in this example the customer wanted to switch entirely to SAML. And you add a SAML login route to direct the user to FusionAuth, and a callback handler to direct the logged-in user to their account.

For more information on SAML in Passport, please see the official documentation on GitHub: https://github.com/node-saml/passport-saml and https://github.com/jaredhanson/passport.

## Example 2: Use FusionAuth As A SAML Service Provider

In this section you'll implement the customer's request to use their Corpo.com database as the SAML identity provider instead of FusionAuth. You'll configure FusionAuth as a service provider instead of an identity provider. Because Corpo is fictional, a free account on Okta.com will act as your SAML identity provider instead.

<Aside type="danger">
You might want to use a second instance of FusionAuth here as your identity provider instead of Okta, but a FusionAuth SAML service provider connection to a FusionAuth SAML identity provider doesn't work at the time of writing this guide. There is an issue logged for the problem [here](https://github.com/FusionAuth/fusionauth-issues/issues/2979).
</Aside>

If you worked through the previous example, delete it and redownload the repository. The Changebank website does not use SAML in this example, so it remains unaltered in its original configuration to use OAuth. FusionAuth translates the SAML calls to Corpo so that Changebank can continue using OAuth.

The initial instructions below to start FusionAuth are the same ones from the previous example.

### Run FusionAuth And The Initial Website

Start by running a new instance of FusionAuth. For compatibility with any operating system and safety, you'll run all code inside [Docker](https://www.docker.com/get-started/).

- Use `git clone` to clone the repository at https://github.com/FusionAuth/fusionauth-example-saml, or download and unzip it.
- Open a terminal in the directory containing the repository files.
- Run the command below to start FusionAuth.
  ```sh
  docker compose up
  ```

This command started FusionAuth using Kickstart, which automatically creates an example application with example users. Using Kickstart saves you the time of having to configure everything yourself when following this tutorial.

<Aside type="note">
If you have completed any FusionAuth tutorials before, you might need to first delete any existing FusionAuth containers with the same name and the database volumes. Run the command below to do that.

```sh
docker rm fa fa_db; docker network remove faNetwork; docker compose down -v
```
</Aside>

<Aside type="note">
If you have any trouble with this tutorial, try replacing the FusionAuth image in the Docker compose file with `fusionauth/fusionauth-app:1.54.0`, in case future versions of FusionAuth introduced a breaking change.
</Aside>

In addition to FusionAuth, there is a website included in this repository, in the `app` directory. The website represents the Change bank website your company owns in this example, where FusionAuth is the authentication provider. The site currently uses OAuth for login, not bespoke authentication, which is slightly different from the example description, but unimportant — the focus of this example is switching the site to use SAML authentication.

Look at how the website currently looks before configuring SAML.

- Open a new terminal and run the commands below.
  ```sh
  cd app

  docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app"  node:23-alpine3.19 sh -c  "npm install"

  docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app" --name app --network faNetwork  -p 3000:3000 node:23-alpine3.19 sh -c  "npm run start"
  ```

These commands will install the Node.js packages in `package.json` and run the Express.js web server on the same network as the FusionAuth server in the Docker file, `faNetwork`.

- Browse to http://localhost:3000.
- Log in to the Changebank website with `richard@example.com` and `password`.

![Change bank account page](../../../../../public/img/docs/lifecycle/examples/saml/accountIdp.webp)

### Configure Okta To Use SAML

This sub-section follows the instructions from the [SAML Okta guide](https://fusionauth.io/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-samlv2). However, that guide says that FusionAuth needs to be on a publicly accessible URL, which is not true. Running FusionAuth on your localhost works fine.

- Create an Okta free trial account at https://www.okta.com/free-trial.
  - You can use a personal email account. You don't need a business domain.
  - Do not browse away from the sign up wizard until all steps have been completed, or you will have to create a new account with a different email address. You will need to download the Okta authenticator mobile app and scan a QR code.
- Once you have signed in to Okta, browse to the Admin page.
  ![Okta admin](../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-admin-button.png)

- Browse to <Breadcrumb>Applications -> Applications</Breadcrumb> and click the <InlineUIElement>Create App Integration</InlineUIElement> button.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-create-app-integration.png" alt="create app integration" width="1200" role="bottom-cropped" />

- Select <InlineField>SAML 2.0</InlineField> and click <InlineUIElement>Next</InlineUIElement>.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-samlv2.png" alt="SAML v2" width="1200" />

- Name the app `fa` and click <InlineUIElement>Next</InlineUIElement>.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-name.png" alt="name Okta app" width="1200" />

- Enter `http://localhost:9011/samlv2/acs` for <InlineField>Single sign-on URL</InlineField> and `http://localhost:9011/samlv2/sp/e9fdb985-9173-4e01-9d73-ac2d60d1dc8e` for the <InlineField>Audience URI (SP Entity ID)</InlineField>.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-dummy-values.png" alt="Okta dummy values" width="1200" />

- Scroll down to <Breadcrumb>Attribute Statements</Breadcrumb> and add `userId` for <InlineField>Name</InlineField> and `user.id` for <InlineField>Value</InlineField>. Then do the same for `email` and `user.email`.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-attribute-statements.png" alt="attribute statements" width="1200" role="bottom-cropped" />

- Click <InlineUIElement>Next</InlineUIElement>. Click <InlineUIElement>Finish</InlineUIElement>.
- Scroll to the bottom of the following page and click <InlineUIElement>View SAML setup instructions</InlineUIElement>. You will need to provide the information on this page to FusionAuth, so keep it open in a separate tab or window.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-configuration-details.png" alt="SAML configuration details" width="1200" role="bottom-cropped" />

- Return to the previous window and browse to the <Breadcrumb>Assignments</Breadcrumb> tab. Click <InlineUIElement>Assign</InlineUIElement> and then <InlineUIElement>Assign to People</InlineUIElement>.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-assign-to-people.png" alt="assign to people" width="1200" role="bottom-cropped" />

- Click the <InlineUIElement>Assign</InlineUIElement> button next to the user you would like to authenticate. Click <InlineUIElement>Save and Go Back</InlineUIElement>, then <InlineUIElement>Done</InlineUIElement>.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-assign-button.png" alt="assign button" width="1200" />

### Configure FusionAuth To Use SAML

- Open a new tab and browse to the [FusionAuth dashboard](http://localhost:9011/admin).
- Browse to <Breadcrumb>Settings -> Key Master</Breadcrumb>.
- Click <InlineUIElement>Import Certificate</InlineUIElement> from the dropdown at the top right.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-import-certificate.png" alt="import certificate" width="1200" />

- Enter `okta` for <InlineField>Name</InlineField>.
- Copy the <InlineField>X.509</InlineField> certificate from the Okta <Breadcrumb>SAML setup instructions</Breadcrumb> page that you left open previously. Paste it into the <InlineField>Certificate</InlineField> textbox and click <InlineUIElement>Submit</InlineUIElement>.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-paste-certificate.png" alt="paste certificate" width="1200" />

- Browse to <Breadcrumb>Settings -> Identity Providers</Breadcrumb> and add a new `SAML v2` identity provider.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-new-idp.png" alt="new identity provider" width="1200" role="bottom-cropped" />

- Enter `e9fdb985-9173-4e01-9d73-ac2d60d1dc8e` for <InlineField>Id</InlineField>. This matches the value entered for the Okta audience URI earlier.
- Enter `okta` for <InlineField>Name</InlineField>
- Paste the <InlineField>Identity Provider Single Sign-On URL</InlineField> from the Okta <Breadcrumb>SAML setup instructions</Breadcrumb> page into <InlineField>IdP endpoint</InlineField>.
- Select `okta` for the verification key.
- Optionally, change the <InlineField>Button text</InlineField> to `Login with Okta`.
- Enable `Debug enabled` and enable all toggles for the Changebank application so that Changebank users can log in with Okta.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-new-idp-settings.png" alt="new idp settings" width="1200" />

- Browse to the <Breadcrumb>Options</Breadcrumb> tab and enter `userId` for the <InlineField>user.Id</InlineField> and `email` for the <InlineField>user.email</InlineField> attribute statements.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-claim-options.png" alt="claim options" width="1200" />

- Click <InlineUIElement>Save</InlineUIElement>.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-integration-details.png" alt="integration details" width="1200" />

You may receive a warning after saving the identity provider.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-cors-warning.png" alt="CORS warning" width="1200" role="bottom-cropped" />

- Browse to <Breadcrumb>Settings -> System</Breadcrumb> and add your Okta URL to the <InlineField>Allowed origins</InlineField> list.

This configures FusionAuth to send the correct CORS headers. You could disable the CORS toggle instead, as this is not a real application.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-cors-settings.png" alt="CORS settings" width="1200" />

### Log In With SAML

The Changebank website should still be running. If not, start it with the code below.

```sh
docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app"  node:23-alpine3.19 sh -c  "npm install"

docker run --platform=linux/amd64 --rm -v ".:/app" -w "/app" --name app --network faNetwork  -p 3000:3000 node:23-alpine3.19 sh -c  "npm run start"
```

- Browse to http://localhost:3000 and click log in.
- Click the <InlineUIElement>Login with Okta</InlineUIElement> button. Test logging in with your Okta username, password, and mobile authentication code. You might need to use a private browser window to clear any existing cookies.

<img src="../../../../../public/img/docs/lifecycle/authenticate-users/identity-providers/enterprise/okta-saml-result.png" alt="result" width="1200" role="bottom-cropped" />

### Remove OAuth Login Option

Currently, the user has to click login in the website, then click another button on the FusionAuth login screen to get to the SAML login. To send the user directly to the SAML login, you can edit `services/authentication.js`.

Change the line below to specify the identity provider explicitly.

```js
//authorizationURL: `${process.env.AUTH_URL}/authorize
authorizationURL: `${process.env.AUTH_URL}/authorize?idp_hint=E9FDB985-9173-4E01-9D73-AC2D60D1DC8E
```

If you restart the Node server, you can now log in with one click.

However, the OAuth page is still available. To remove it entirely, you will need to edit the FusionAuth theme for your application. Start learning about themes [here](https://fusionauth.io/docs/customize/look-and-feel/).

There is also a forum issue about this question [here](https://fusionauth.io/community/forum/topic/2194/disable-username-and-password-fields).

## Clean Up

To remove all the Docker volume, containers, images, and networks used in this guide, run the commands below.

```sh
docker compose down -v
docker rm fa fa_db fa2 fa_db2
docker volume rm db_data fusionauth_config
docker rmi postgres:16.0-bookworm fusionauth/fusionauth-app:latest node:23-alpine3.19
docker network prune
```

## TODO

add link to this guide from saml overview introduction
check bullet points and differentiate for actions

Show how admin users of a tenant can configure a SAML connection (using the API to add/update FusionAuth Identity Provider)
add link to SMIL article
add link to both articles in github issue
delete toc
readme

make repo

say example 1 and 2 are completely separate