import APIBlock from 'src/components/api/APIBlock.astro';
import APIField from 'src/components/api/APIField.astro';
import DeprecatedSince from 'src/components/api/DeprecatedSince.astro';
import InlineField from 'src/components/InlineField.astro';
import ApplicationOauthconfigurationClientauthenticationpolicy from 'src/content/docs/apis/_application-oauthConfiguration-clientAuthenticationPolicy.mdx';
import ApplicationOauthconfigurationProofkeyforcodeexchangepolicy from 'src/content/docs/apis/_application-oauthConfiguration-proofKeyForCodeExchangePolicy.mdx';
import JSON from 'src/components/JSON.astro';

#### Response Body

<APIBlock>
  <APIField name="httpSessionMaxInactiveInterval" type="Integer">
    The time in seconds until an inactive session will be invalidated, from the application's tenant. Used when creating a new session in the FusionAuth Front End.
  </APIField>
  <APIField name="logoutURL" type="String">
    The logout redirect URL when sending the user's browser to the `/oauth2/logout` URI of the FusionAuth Front End. From the application's tenant.
  </APIField>
  <APIField name="oauthConfiguration.authorizedOriginURLs" type="Array<String>">
    An array of URLs that are the authorized origins for FusionAuth OAuth.

    When this configuration is omitted, all HTTP origins are allowed to use the browser based grants and the HTTP response header of `X-Frame-Options: DENY` will be added to each response to disallow iframe loading.
  </APIField>
  <APIField name="oauthConfiguration.authorizedRedirectURLs" type="Array<String>">
    An array of URLs that are the authorized redirect URLs for FusionAuth OAuth.
  </APIField>
  <APIField name="oauthConfiguration.authorizedURLValidationPolicy" since="1.43.0">
    Controls the validation policy for <InlineField>oauthConfiguration.authorizedOriginURLs</InlineField> and <InlineField>oauthConfiguration.authorizedRedirectURLs</InlineField>.

    The possible values are:

    * `ExactMatch` - Only the configured values that do not contain wildcards are considered for validation. Values during OAuth 2.0 workflows must match a configured value exactly.
    * `AllowWildcards` - Configured values with and without wildcards are considered for validation. Values during OAuth 2.0 workflows can be matched against wildcard patterns or exactly match a configured value.
  </APIField>
  <APIField name="oauthConfiguration.clientAuthenticationPolicy" type="String" since="1.28.0">
    Determines the client authentication requirements for the OAuth 2.0 Token endpoint.

    The possible values are:

<ApplicationOauthconfigurationClientauthenticationpolicy />
  </APIField>
  <APIField name="oauthConfiguration.clientId" type="String">
    The OAuth client Id of the Application.
  </APIField>
  <APIField name="oauthConfiguration.clientSecret" type="String">
    The OAuth client secret.
    This field will only be provided when the request was authenticated using an API key.
  </APIField>
  <APIField name="oauthConfiguration.consentMode" type="String" since="1.50.0">
    Controls the policy for prompting a user to consent to requested OAuth scopes. This configuration only takes effect when <InlineField>oauthConfiguration.relationship</InlineField> is `ThirdParty`.

    The possible values are:

    * `AlwaysPrompt` - Always prompt the user for consent.
    * `RememberDecision` - Remember previous consents; only prompt if the choice expires or if the requested or required scopes have changed. The duration of this persisted choice is controlled by the Tenant's <InlineField>externalIdentifierConfiguration.rememberOAuthScopeConsentChoiceTimeToLiveInSeconds</InlineField> value.
    * `NeverPrompt` - The user will be never be prompted to consent to requested OAuth scopes. Permission will be granted implicitly as if this were a `FirstParty` application. This configuration is meant for testing purposes only and should not be used in production.
  </APIField>
  <APIField name="oauthConfiguration.deviceVerificationURL" type="String" since="1.11.0">
    The device verification URL to be used with the Device Code grant type.
  </APIField>
  <APIField name="oauthConfiguration.enabledGrants" type="Array<String>" since="1.5.0">
    The enabled grants for this application. In order to utilize a particular grant with the OAuth 2.0 endpoints you must have enabled the grant.

    Supported values include:

    * `authorization_code`
    * `implicit`
    * `password`
    * `refresh_token`
    * `urn:ietf:params:oauth:grant-type:device_code` <span class="text-green-600">Available since 1.11.0</span>
  </APIField>
  <APIField name="oauthConfiguration.generateRefreshTokens" type="Boolean" since="1.3.0">
    Determines if the OAuth 2.0 Token endpoint will generate a refresh token when the `offline_access` scope is requested.
  </APIField>
  <APIField name="oauthConfiguration.logoutBehavior" type="String" since="1.11.0">
    Behavior when `/oauth2/logout` is called.

    Valid values:

    * `RedirectOnly`
    ** End the SSO session and redirect to the configured Logout URL or the passed in <InlineField>post_logout_redirect_uri</InlineField> value.
    * `AllApplications`
    ** End the SSO session and make a `GET` request to all configured Logout URLs for every application in the tenant.
  </APIField>
  <APIField name="oauthConfiguration.logoutURL" type="String">
    The logout URL for the Application. FusionAuth will redirect to this URL after the user logs out of OAuth.
  </APIField>
  <APIField name="oauthConfiguration.proofKeyForCodeExchangePolicy" type="String" since="1.28.0">
    Determines the PKCE requirements when using the authorization code grant.

    The possible values are:

    <ApplicationOauthconfigurationProofkeyforcodeexchangepolicy />
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.address.enabled" type="Boolean" since="1.50.0">
    Whether the `address` OAuth scope provided by FusionAuth is enabled for this application.
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.address.required" type="Boolean" since="1.50.0">
    Whether consent to the `address` OAuth scope provided by FusionAuth is required for this application when present on the OAuth request.
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.email.enabled" type="Boolean" since="1.50.0">
    Whether the `email` OAuth scope provided by FusionAuth is enabled for this application.
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.email.required" type="Boolean" since="1.50.0">
    Whether consent to the `email` OAuth scope provided by FusionAuth is required for this application when present on the OAuth request.
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.phone.enabled" type="Boolean" since="1.50.0">
    Whether the `phone` OAuth scope provided by FusionAuth is enabled for this application.
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.phone.required" type="Boolean" since="1.50.0">
    Whether consent to the `phone` OAuth scope provided by FusionAuth is required for this application when present on the OAuth request.
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.profile.enabled" type="Boolean" since="1.50.0">
    Whether the `profile` OAuth scope provided by FusionAuth is enabled for this application.
  </APIField>
  <APIField name="oauthConfiguration.providedScopePolicy.profile.required" type="Boolean" since="1.50.0">
    Whether consent to the `profile` OAuth scope provided by FusionAuth is required for this application when present on the OAuth request.
  </APIField>
  <APIField name="oauthConfiguration.relationship" type="String" since="1.50.0">
    The application's relationship to the authorization server.

    The possible values are:

    * `FirstParty` - The application has the same owner as the authorization server. Consent to requested OAuth scopes is granted implicitly.
    * `ThirdParty` - The application is external to the authorization server. Users will be prompted to consent to requested OAuth scopes based on <InlineField>oauthConfiguration.consentMode</InlineField>.
  </APIField>
  <APIField name="oauthConfiguration.requireClientAuthentication" type="Boolean" since="1.3.0" deprecated>
    Determines if the OAuth 2.0 Token endpoint requires client authentication. If this is enabled, the client must provide client credentials when using the Token endpoint. The `client_id` and `client_secret` may be provided using a Basic Authorization HTTP header, or by sending these parameters in the request body using POST data.

    <DeprecatedSince since="1.28.0">
     In version 1.28.0 and beyond, client authentication can be managed via <InlineField>oauthConfiguration.clientAuthenticationPolicy</InlineField>.
    </DeprecatedSince>
  </APIField>
  <APIField name="oauthConfiguration.requireRegistration" type="Boolean" since="1.28.0">
    Determines if the user will be required to be registered, or complete registration before redirecting to the configured callback in the authorization code grant or the implicit grant. This configuration does not affect any other grant, and does not affect the API usage.
  </APIField>
  <APIField name="oauthConfiguration.scopeHandlingPolicy" type="String" since="1.50.0">
    Controls the policy for handling of OAuth scopes when populating JWTs and the UserInfo response.

    The possible values are:

    * `Compatibility` - OAuth workflows will populate JWT and UserInfo claims in a manner compatible with versions of FusionAuth before version 1.50.0.
    * `Strict` - OAuth workflows will populate token and UserInfo claims according to the OpenID Connect 1.0 specification based on requested and consented scopes.
  </APIField>
  <APIField name="oauthConfiguration.unknownScopePolicy" type="String" since="1.50.0">
    Controls the policy for handling unknown scopes on an OAuth request.

    The possible values are:

    * `Allow` - Unknown scopes will be allowed on the request, passed through the OAuth workflow, and written to the resulting tokens without consent.
    * `Remove` - Unknown scopes will be removed from the OAuth workflow, but the workflow will proceed without them.
    * `Reject` - Unknown scopes will be rejected and cause the OAuth workflow to fail with an error.
  </APIField>
</APIBlock>

<JSON title="Example Response JSON" src="applications/oauth-configuration/response.json" />
