import API from 'src/components/api/API.astro';
import APIField from 'src/components/api/APIField.astro';
import InlineField from 'src/components/InlineField.astro';
import OauthIdpRequestBody from 'src/content/docs/apis/identity-providers/_oauth-idp-request-body.mdx';
import StandardPostResponseCodes from 'src/content/docs/apis/_standard-post-response-codes.astro';
import OauthIdpResponseBody from 'src/content/docs/apis/identity-providers/_oauth-idp-response-body.mdx';
import StandardGetResponseCodes from 'src/content/docs/apis/_standard-get-response-codes.astro';
import GenericUpdateExplanationFragment from 'src/content/docs/apis/_generic-update-explanation-fragment.mdx';
import StandardPutResponseCodes from 'src/content/docs/apis/_standard-put-response-codes.astro';
import StandardDeleteResponseCodes from 'src/content/docs/apis/_standard-delete-response-codes.astro';
import CompleteLoginText from 'src/content/docs/apis/identity-providers/_complete-login-text.mdx';
import APIBlock from 'src/components/api/APIBlock.astro';
import XForwardedForHeader from 'src/content/docs/apis/identity-providers/_x-forwarded-for-header.mdx';
import XFusionauthTenantIdHeaderScopedOperationRowOnly from 'src/content/docs/apis/_x-fusionauth-tenant-id-header-scoped-operation-row-only.mdx';
import IdentityProviderLoginRequestBody from 'src/content/docs/apis/identity-providers/_identity-provider-login-request-body.astro';
import IdentityProviderLoginResponseBody from 'src/content/docs/apis/identity-providers/_identity-provider-login-response-body.mdx';
import DeprecatedSince from 'src/components/api/DeprecatedSince.astro';

## Create {props.manual_idp_display_name} Identity Provider

### Request

<API method="POST" uri="/api/identity-provider" authentication={["api-key"]} title={`Create a ${props.manual_idp_display_name} Identity Provider using a randomly generated Id`}/>

<API method="POST" uri={`/api/identity-provider/{identityProviderId}`} authentication={["api-key"]} title={`Create a ${props.manual_idp_display_name} Identity Provider with the provided unique Id`}/>

The <InlineField>type</InlineField> in the request JSON indicates this is the {props.manual_idp_display_name} Identity Provider type.

#### Request Parameters

<APIBlock>
  <APIField name="identityProviderId" type="UUID" optional defaults="secure random UUID" since="1.61.0">
    The Id to use for the new Identity Provider. If an Id is not provided, a secure random UUID is generated. If neither an Id nor <InlineField>identityProvider.name</InlineField> are provided, the legacy fixed {props.manual_idp_display_name} IdP Id <code>{props.idp_id}</code> will be used.
  </APIField>
</APIBlock>

<OauthIdpRequestBody idp_lowercase={props.idp_lowercase}
                     idp_type={props.idp_type}
                     idp_display_name={props.manual_idp_display_name}
                     idp_linking_strategy={props.idp_linking_strategy}
                     idp_login_method={props.idp_login_method}
                     idp_since={props.idp_since}
                     optional_tag={props.optional_tag} />

### Response

<StandardPostResponseCodes never_search_error />

<OauthIdpResponseBody idp_lowercase={props.idp_lowercase}
                      idp_type={props.idp_type}
                      idp_display_name={props.manual_idp_display_name}
                      idp_linking_strategy={props.idp_linking_strategy}
                      idp_login_method={props.idp_login_method}
                      idp_since={props.idp_since}
                      idp_id={props.idp_id}
                      optional_tag={props.optional_tag} />


## Retrieve {props.manual_idp_display_name} Identity Provider


### Request

<API method="GET" uri={`/api/identity-provider/{identityProviderId}`} authentication={["api-key"]} title={`Retrieve ${props.manual_idp_display_name} Identity Provider by Id`}/>

<API method="GET" uri={`/api/identity-provider?type=${props.idp_type}`} authentication={["api-key"]} title={`Retrieve ${props.manual_idp_display_name} Identity Providers by type`}/>

### Response

<StandardGetResponseCodes never_search_error />

<OauthIdpResponseBody idp_lowercase={props.idp_lowercase}
                      idp_type={props.idp_type}
                      idp_display_name={props.manual_idp_display_name}
                      idp_linking_strategy={props.idp_linking_strategy}
                      idp_login_method={props.idp_login_method}
                      idp_since={props.idp_since}
                      idp_id={props.idp_id}
                      optional_tag={props.optional_tag} />


## Update {props.manual_idp_display_name} Identity Provider

<GenericUpdateExplanationFragment capitalized_object_name={`${props.manual_idp_display_name} Identity Provider`} />

### Request

<API method="PUT" uri={`/api/identity-provider/{identityProviderId}`} authentication={["api-key"]} showPatch={true} title={`Update ${props.manual_idp_display_name} Identity Provider by Id`}/>

<API method="PUT" uri={`/api/identity-provider?type=${props.idp_type}`} authentication={["api-key"]} showPatch={true} title={`Update ${props.manual_idp_display_name} Identity Provider by type (deprecated)`}/>

<DeprecatedSince since="1.61.0">Prefer updating by Id. Updating by type attempts to update the Identity Provider with the legacy fixed Id <code>{props.idp_id}</code>.</DeprecatedSince>

<OauthIdpRequestBody idp_lowercase={props.idp_lowercase}
                     idp_type={props.idp_type}
                     idp_display_name={props.manual_idp_display_name}
                     idp_linking_strategy={props.idp_linking_strategy}
                     idp_since={props.idp_since}
                     optional_tag={props.optional_tag} />
### Response

The response for this API contains the {props.manual_idp_display_name} Identity Provider.

<StandardPutResponseCodes never_search_error />

<OauthIdpResponseBody idp_lowercase={props.idp_lowercase}
                      idp_type={props.idp_type}
                      idp_display_name={props.manual_idp_display_name}
                      idp_linking_strategy={props.idp_linking_strategy}
                      idp_since={props.idp_since}
                      idp_id={props.idp_id}
                      optional_tag={props.optional_tag} />


## Delete {props.manual_idp_display_name} Identity Provider

Delete by type or Id. Deleting by type attempts to delete the Identity Provider with the legacy fixed Id <code>{props.idp_id}</code>.

### Request

<API method="DELETE" uri={`/api/identity-provider/{identityProviderId}`} authentication={["api-key"]} title={`Delete ${props.manual_idp_display_name} Identity Provider by Id`}/>

<API method="DELETE" uri={`/api/identity-provider?type=${props.idp_type}`} authentication={["api-key"]} title={`Delete ${props.manual_idp_display_name} Identity Provider by type (deprecated)`}/>

<DeprecatedSince since="1.61.0">Prefer deleting by Id. Deleting by type attempts to delete the Identity Provider with the legacy fixed Id <code>{props.idp_id}</code>.</DeprecatedSince>

### Response

This API does not return a JSON response body.

<StandardDeleteResponseCodes never_search_error />


## Complete {props.manual_idp_display_name} Login

<CompleteLoginText idp_display_name={props.manual_idp_display_name} token_text_with_article={"a " + props.idp_token_or_code} token_text={props.idp_token_or_code} />

### Request

<API method="POST" uri="/api/identity-provider/login" authentication={["none"]} title={`Complete ${props.manual_idp_display_name} Login`}/>

#### Request Headers

<APIBlock>
  <div class="border-t-2"></div>
  <XForwardedForHeader />
  <XFusionauthTenantIdHeaderScopedOperationRowOnly />
</APIBlock>

<IdentityProviderLoginRequestBody idp_token_or_code={props.idp_token_or_code}
                                  idp_display_name={props.manual_idp_display_name}
                                  idp_lowercase={props.idp_lowercase}
                                  idp_since={props.idp_since} />

### Response

The response for this API contains the User object.

<IdentityProviderLoginResponseBody idp_display_name={props.manual_idp_display_name} />
