import InlineField from 'src/components/InlineField.astro';
import Aside from 'src/components/Aside.astro';

FusionAuth will also store the {props.idp_display_name} <code>{props.token_name}</code> returned from the {props.return_text} in the `identityProviderLink` object, in the <InlineField>identityProviderLink.token</InlineField> field. This object is accessible using the [Link API](/docs/apis/identity-providers/links).

The `identityProviderLink` object stores the token so that you can use it in your application to call {props.idp_display_name} APIs on behalf of the user if desired.

{ props.idp_long_lived_token_type === 'refresh' && <>
Calling {props.idp_display_name} APIs first requires a refresh grant to get a new access token.
</>}

{props.idp_refresh_additional_info_url && <>
  <br/>
  <br/>
  <a href={props.idp_refresh_additional_info_url} window="_blank">More about the refresh grant</a>
</>}

{props.idp_display_name == 'Google' && <>
  If you need the refresh token to obtain new access tokens, the typed Google IdP will not meet your needs, since it stores the <code>id_token</code> on the Link. However, Google supports OIDC, which in turn allows for refresh tokens. Therefore, please use an <a href="/docs/apis/identity-providers/openid-connect">OpenID Connect Identity Provider</a>.
</>}

{props.idp_display_name == 'Facebook' && <>
The Facebook Identity Provider stores a long-lived token. <a href="https://developers.facebook.com/docs/facebook-login/guides/access-tokens/get-long-lived/">More about this token</a>.
</>}

{props.idp_display_name == 'Xbox' && <>
The Xbox Identity Provider requires a developer account to read the documentation.
</>}

{!props.hide_token_map_deprecation && <>
<br/><br/>
<Aside type="note">
Prior to version <code>1.28.0</code>, the token was stored in the <code>UserRegistration</code> object, in the <code>tokens</code> Map.
</Aside>
</>}

