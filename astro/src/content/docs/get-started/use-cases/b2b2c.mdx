---
title: Business To Business To Consumer
description: Allow your customers' users to authenticate with FusionAuth
section: get started
subcategory: use cases
---
import B2B2CDescription from 'src/content/docs/get-started/use-cases/_b2b2c-description.mdx';
import Breadcrumb from 'src/components/Breadcrumb.astro';
import Aside from 'src/components/Aside.astro';
import CircusesRelationships from 'src/diagrams/docs/get-started/use-cases/b2b2c/b2b2c-circuses.astro';
import AddNewCustomers from 'src/diagrams/docs/get-started/use-cases/b2b2c/add-new-customers.astro';
import UserLoggingIn from 'src/diagrams/docs/get-started/use-cases/b2b2c/user-logging-in.astro';
import AdminManagingUsers from 'src/diagrams/docs/get-started/use-cases/b2b2c/admin-managing-users.astro';

## Overview

<B2B2CDescription />

## Problem 

You have an application that you sell to customers and they then have their own users. You want to safely store those users' personal identifiable information and credentials, but allow your customers to manage their users.

## Solution

With the business to business to consumer (b2b2c) use case, you can allow the users of your customers to securely authenticate. You can also allow your customers to read, update and delete users from their system.

<Aside type="note">
There are multiple users of a b2b2c system.

In this document, customers refer to people who are paying you to use the application you have build.

Users refers to the end users of the system. These are people who are the customers' users or customers.
</Aside>

## Prerequisites

You have configured your application or applications to [delegate authentication to FusionAuth](/docs/get-started/use-cases/auth-service) via the Authorization Code grant and the hosted login pages.

You have created a FusionAuth API key with the key manager attribute enabled.

## Example Scenario

Suppose your company, BigTop Tickets, sells a ticketing system for circuses. Your software package lets customers buy tickets to see adorable clowns and great feats of strength. Circuses sometimes offer free events, so you need to support both paying and free customers.

Your customers are the circuses, and their users are their customers. Each circus has their own policies about login methods, password length, and more.

You are super excited because you've landed both Ringling Bros. and Barnum & Bailey Circus and Cirque du Soleil as your customers. And, of course, they each have customers of their own, who are individuals or other organizations buying tickets.

<CircusesRelationships alt="Circus relationships diagram."/>

The circus' set of customers can overlap or be disjoint. Jamie Morgan is an example of a customer of both circuses.

## Actors/Components

* your customer and their client application (mobile app or browser)
* your customer's user and their client application (mobile app or browser)
* your application
* FusionAuth

## Implementation Steps

This is a three step implementation to ensure your customers users's will always be able to get the tickets they need. The steps include:

* Setting up your system to handle adding new customers
* Letting customers' users sign in or register
* Allowing your customers to manage their users and other settings


- let users sign in (mult client ids and redirect urls, RBAC)
- admin of users (tenant bound API keys and integrated into your app)

Here's a high level sequence diagram of the process of adding new customers. Each customer is represented as a tenant.

<AddNewCustomers alt="Adding new customers." />

Here's a high level sequence diagram of a user logging in to one of the customer's ticketing systems. The application is responsible for mapping the user to the correct customer.

<UserLoggingIn alt="Users logging in." />

Here's a high level sequence diagram of a customer admin user managing their users. The admin functions are integrated in to the application admin screen using API calls.

<AdminManagingUsers alt="Tenant admin management of their users." />

### Adding New Customers


### Customers's Users Authentication

### Customer Admin Managment


### Implementation Notes

In this case, each customer has an entirely different set of user accounts. If someone signs up with jamie.morgan@example.com for Ringling Brothers and for Cirque De Soleil, they are entirely separate accounts with no innate relation to each other.

They can have different:

* profile attributes
* credentials
* roles in applications

jamie.morgan@example.com's accounts Ringling Brothers and for Cirque De Soleil are entirely separate and that user may not even know the ticketing application for these circuses are both provided by TopTicket.

#### Alternative Implementation

If you instead want to have a shared user space, you have the following options:

* Model each customer as an applicationr. The user can log into them and be assigned roles given roles. If you want to limit access to a given set of customers for one user, self-service registration must be disabled, so you'd have to use a different provisioning method. Data about the user's relationship to the customer can be stored on the `registration.data` field.
* Use entities. Create one application users log into, model each customer as an entity and use the [Entity Grant APIs](/docs/apis/entities/grants) to determine which customers a user should have access to. The permissions can be placed in a token using an [API call within a lambda](/docs/extend/code/lambdas/lambda-remote-api-calls). Data about the user's relationship to the customer can be stored on the `grant.data` field.

In both these cases you'd keep all users in one tenant. You'd have to build your own authorization system to ensure that customer admins from Ringling Brothers couldn't access Cirque De Soliels' users.

You might want to use these if you wanted your customers' users to share accounts between different circuses. In this case, they will be able to log in to one application and then switch between them, possibly acquiring different roles or permissions. This is similar to GitHub or Slack.

## Expected Outcome

Your web or mobile application has isolated groups of users, one set for each customer. Each user has their own profile data and manages their identity, either in your application or via other solutions such as social sign-on.

## Edge Cases


## Other Example Scenarios

Any application which has customers who then have their own users or customers. A very common scenario is a private labelled product sold to SMBs or consumers.
 Examples include:

* Website builders resold by creating agencies
* Appointment schedulers for hair salons, personal trainers and other service professionals
* Job boards
* Accounting software for use by CPA's customers

In each of these cases there is a clear differentiator between the customer organization buying the solution and the end customer. This use case is appropriate when the identity of the end user is *not* controlled by the customer, but rather by the end user themselves.

## Additional Documentation

TODO

- user manages identity vs customer (latter case is b2b2e)
- want to allow customers to manage settings
- do users move between customers? if so, use apps, otherwise use tenants

implementation
- handle adding new customers
- let users sign in (mult client ids and redirect urls, RBAC)
- admin of users (tenant bound API keys and integrated into your app)


determine which customer a user is part of
- pull over from tenant guide
https://fusionauth.io/docs/extend/examples/multi-tenant#data-plane-application-tenant-determination ?

edge cases
- how to handle multiple application configs in diff tenants all pointing to same underlying webapp
-- authorized redirect url lookup 

add link to
- multi tenant example
- segmenting users section
- private label saas blog post
- entities 
- search query

https://fusionauth.io/docs/extend/examples/multi-tenant#data-plane-application-tenant-determination
