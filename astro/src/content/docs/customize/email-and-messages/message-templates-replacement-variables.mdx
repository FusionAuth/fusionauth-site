---
title: Message Variables
description: Learn which replacement variables and corresponding SMS templates are available.
section: customize
subcategory: email and messages
---
import TemplateBaseUrlNote from 'src/content/docs/customize/email-and-messages/_template-base-url-note.mdx';
import APIBlock from 'src/components/api/APIBlock.astro';
import APIField from 'src/components/api/APIField.astro';
import Breadcrumb from 'src/components/Breadcrumb.astro';
import EnterprisePlanBlurb from 'src/content/docs/_shared/_enterprise-plan-blurb.astro';
import TwoFactorRemovePhone from 'src/content/docs/_shared/message/_two-factor-remove-txt.mdx';
import PasswordlessLoginTemplates from 'src/content/docs/_shared/message/_passwordless-txt.mdx';
import SetupPasswordTemplates from 'src/content/docs/_shared/message/_setup-password-txt.mdx';
import ForgotPasswordPhone from 'src/content/docs/_shared/message/_forgot-password-txt.mdx';
import TwoFactorLoginPhone from 'src/content/docs/_shared/message/_two-factor-login-txt.mdx';
import PhoneVerification from 'src/content/docs/_shared/message/_phone-verification-txt.mdx';
import ThreatDetectedPhone from 'src/content/docs/_shared/message/_threat-detected-txt.mdx';
import TwoFactorAddPhone from 'src/content/docs/_shared/message/_two-factor-add-txt.mdx';

{/* MAKE SURE YOU UPDATE astro/src/content/docs/_shared/message/template_url_list if you add any templates */}

## Templates & Replacement Variables

The message template body supports replacement variables. This means place holders can be inserted and the value will be calculated at the time the message template is rendered and sent to a user.

Most templates will contain the User object as returned on the Retrieve User API. This means you can utilize any value found on the User object such as email, first name, last name, etc.

Below you will find each stock template that FusionAuth ships for reference. The available replacement values will be outlined below for each template.

## Previewing Message Templates

FusionAuth provides the capability to preview message templates via the [Message Template API](/docs/apis/message-templates) or the administrative user interface by navigating to <Breadcrumb>Customizations -> Message Templates -> Edit -> Preview</Breadcrumb>. The following sample values are used when rendering the template.

| Parameter                    | Sample Value                                                                | Purpose                                                                 |
|------------------------------|-----------------------------------------------------------------------------|-------------------------------------------------------------------------|
| `${application}`             | `{ "name": "My Application", "oauthConfiguration": { "clientId": "123456" } }` | Application name, `oauthConfiguration.clientId` for themed message links |
| `${changePasswordId}`        | `1234567890`                                                                | Embedded in change password and set password URLs                          |
| `${code}`                    | `123456`                                                                    | Embedded in MFA/Two Factor messages                                         |
| `${event}`                   | `{ "type": "UserLoginSuspicious", "info": {...} }`                          | Embedded in User Event messages                                             |
| `${method}`                  | `{ "id" : "FQLM", "method" : "email" }`                                     | Embedded in Two Factor Add/Remove event messages                            |
| `${oneTimeCode}`             | `88888`                                                                     | Embedded in passwordless login messages                                     |
| `${tenant}`                  | `{ "name": "My Tenant", "id": "78910" }`                                    | `tenant.id` allows links embedded in messages to render using the correct theme for that tenant. |
| `${user}`                    | `{ "firstName": "John", "lastName": "Doe" }`                                | User information and `user.tenantId` for themed message links          |
| `${verificationId}`          | `987654`                                                                    | Embedded in phone number verification messages                              |
| `${verificationOneTimeCode}` | `abcdef`                                                                    | Embedded in phone number verification messages                              |

## Retrieving Default Templates

In order to version control the templates or customize them, you can use the admin UI. But you can also pull retrieve them all by using the following command:

```
wget -i https://raw.githubusercontent.com/FusionAuth/fusionauth-site/main/astro/src/content/docs/_shared/message/template_url_list
```

This will place all the message templates in the current working directory.

## Using Replacement Variables

Below are some basic examples of using replacement values in your message templates.

Consider the following User represented by this condensed JSON object.

```json
{
  "phoneNumber": "+15555551234",
  "firstName": "Monica",
  "id": "1c592f8a-59c6-4a09-82f8-f4257e3ea4c8",
  "lastName": "Hall"
}
```

The following are example usages with a rendered output based upon the above mentioned example User. The replacement variables are rendered
using [Apache FreeMarker](https://freemarker.apache.org/docs/index.html) which is an HTML template language.

A default value should be provided for variables that may be undefined at runtime such as `firstName`. See `firstName` in the example below
is followed by a bang `!` and then the string `Unknown User`. This indicates that if `firstName` is undefined when the template is rendered the value
of `Unknown User` should be used as a default value.

*Template Source*
```html
Hi ${user.firstName!'Unknown User'}, welcome to Pied Piper.

Please verify your phone number ${user.phoneNumber} by following the provided link.

https://piedpiper.fusionauth.io/identity/verify/${verificationId}
- Admin
```

*Rendered Output*
```html
Hi Monica, welcome to Pied Piper.

Please verify your phone number +15555551234 by following the provided link.

https://piedpiper.fusionauth.io/identity/verify/YkQY5Gsyo4RlfmDciBGRmvfj3RmatUqrbjoIZ19fmw4
- Admin
```

## Available Message Templates

Below is an overview of each message template that ships with FusionAuth.

<TemplateBaseUrlNote />

### Forgot Password

This is also known as the "Change Password" template.

<ForgotPasswordPhone />

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the [Application API](/docs/apis/applications) for field definitions.

    *Note*:
    This object may not be available depending upon when this template is constructed. If you utilize this object in your template, ensure you first check to see if it is defined.
  </APIField>
  <APIField name="changePasswordId" type="String">
    The change password Id that must be included as a path segment in the `/password/change` link. See the [theme variables](/docs/customize/look-and-feel/template-variables) documentation for more information on how this value is used.
  </APIField>
  <APIField name="state" type="Object">
    If the `state` was provided during the Forgot Password request, it will be available to you in the message template.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the [Tenant API](/docs/apis/tenants) for field definitions.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
</APIBlock>

### Passwordless Login

<PasswordlessLoginTemplates />

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the Application API for field definitions.

    *Note*:
    This object may not be available depending upon when this template is constructed. If you utilize this object in your template, ensure you first check to see if it is defined.
  </APIField>
  <APIField name="code" type="String">
    The unique code intended to be used by the [Complete a Passwordless Login](/docs/apis/passwordless#complete-a-passwordless-login) API.
  </APIField>
  <APIField name="state" type="Object">
    If the `state` was provided when the Passwordless request was initiated, it will be available to you in the template.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the Tenant API for field definitions of a Tenant.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
</APIBlock>

### Phone Verification

<PhoneVerification />

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the Application API for field definitions.

    *Note*:
    This object may not be available depending upon when this template is constructed. If you utilize this object in your template, ensure you first check to see if it is defined.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the [Tenant API](/docs/apis/tenants) for field definitions.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
  <APIField name="verificationId" type="String">
    The verification Id intended to be used by the [Identity Verify](/docs/apis/identity-verify) API.
  </APIField>
  <APIField name="verificationOneTimeCode" type="String">
    The verification One Time Code (OTP) to be used with the gated Phone Verification workflow. The user enters this code to verify their phone number.
  </APIField>
</APIBlock>

### Set Up Password

<SetupPasswordTemplates/>

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the Application API for field definitions.

    *Note*:
    This object may not be available depending upon when this template is constructed. If you utilize this object in your template, ensure you first check to see if it is defined.
  </APIField>
  <APIField name="changePasswordId" type="String">
    The change password Id intended to be used by the [Change a User's Password](/docs/apis/users#change-a-users-password) API.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the [Tenant API](/docs/apis/tenants) for field definitions.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
</APIBlock>

### Threat Detected

<EnterprisePlanBlurb />

<ThreatDetectedPhone />

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the [Application API](/docs/apis/applications) for field definitions.
  </APIField>
  <APIField name="event.info" type="EventInfo">
    The EventInfo object, see the [User Login Suspicious](/docs/extend/events-and-webhooks/events/user-login-suspicious) event definition for example field definitions.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the [Tenant API](/docs/apis/tenants) for field definitions.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
</APIBlock>

### Two Factor Authentication

<EnterprisePlanBlurb />

<TwoFactorLoginPhone />

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the [Application API](/docs/apis/applications) for field definitions.

    *Note*:
    This object may not be available depending upon when this template is constructed. If you utilize this object in your template, ensure you first check to see if it is defined. You can check for this variable safely in FreeMarker using the missing value test operator and an `if` statement:

```html
[#if application??]
  [#-- Use application here --]
[/#if]
```

    This object is not available on the message template when:

     * The multi-factor workflow was [started](/docs/apis/two-factor#start-multi-factor) without providing the `applicationId` on that request.
     * Multi-factor authentication is required during a call to the [login API](/docs/apis/login#authenticate-a-user) without providing the `applicationId` parameter. That documentation points out that there is likely no production use case where calling the API without the `applicationId` parameter is useful.
     * The message is being sent to [enable](/docs/apis/two-factor#send-a-multi-factor-code-when-enabling-mfa) or [disable](/docs/apis/two-factor#send-a-multi-factor-code-when-disabling-mfa) a multi-factor method without providing the `applicationId` on the request.
  </APIField>
  <APIField name="code" type="String">
    A code that the user must provide to complete multi-factor authentication.
  </APIField>
  <APIField name="email" type="String">
    Email address associated with the `user`.
  </APIField>
  <APIField name="mobilePhone" type="String">
    Mobile phone number associated with the `user`.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the [Tenant API](/docs/apis/tenants) for field definitions.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
</APIBlock>

### Two Factor Authentication Method Added

<EnterprisePlanBlurb />

<TwoFactorAddPhone />

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the [Application API](/docs/apis/applications) for field definitions.

    *Note*:
    This object may not be available depending upon when this template is constructed. If you utilize this object in your template, ensure you first check to see if it is defined. You can check for this variable safely in freemarker by wrapping the variable as such: `${(application)!""}`.
  </APIField>
  <APIField name="event" type="Event">
    The Event object for a two factor add event.  See the [Webhooks & Events section](/docs/extend/events-and-webhooks/events/user-two-factor-method-add) for field definitions.
  </APIField>
  <APIField name="method" type="Object">
    The two-factor method that was added. See the [Multi Factor/Two Factor APIs](/docs/apis/two-factor) for property definitions and example JSON.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the [Tenant API](/docs/apis/tenants) for field definitions.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
</APIBlock>

### Two Factor Authentication Method Removed

<EnterprisePlanBlurb />

<TwoFactorRemovePhone />

#### Replacement Variables

<APIBlock>
  <APIField name="application" type="Application">
    The Application object, see the [Application API](/docs/apis/applications) for field definitions.

    *Note*:
    This object may not be available depending upon when this template is constructed. If you utilize this object in your template, ensure you first check to see if it is defined. You can check for this variable safely in freemarker by wrapping the variable as such: `${(application)!""}`.
  </APIField>
  <APIField name="event" type="Event">
    The Event object for a two factor remove event.  See the [Webhooks & Events section](/docs/extend/events-and-webhooks/events/user-two-factor-method-remove) for field definitions.
  </APIField>
  <APIField name="method" type="Object">
    The two-factor method that was removed. See the [Multi Factor/Two Factor APIs](/docs/apis/two-factor) for property definitions and example JSON.
  </APIField>
  <APIField name="tenant" type="Tenant">
    The Tenant object, see the [Tenant API](/docs/apis/tenants) for field definitions.
  </APIField>
  <APIField name="user" type="User">
    The User object, see the [User API](/docs/apis/users) for field definitions of a User.
  </APIField>
</APIBlock>
