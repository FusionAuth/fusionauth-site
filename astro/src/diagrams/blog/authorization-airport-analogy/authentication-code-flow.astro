---
import Diagram from "../../../components/mermaid/SequenceDiagram.astro";
const { alt } = Astro.props;

//language=Mermaid
const diagram = `
sequenceDiagram

participant User
participant ClientApp as Client Application
participant AuthServer as Authorization Server
participant ResourceServer as Resource Server

User->>ClientApp: Clicks "Login"
ClientApp->>AuthServer: Redirects to /authorize
User->>AuthServer: Enters credentials
AuthServer-->>User: Redirects to Client with Authorization Code
User->>ClientApp: Follows redirect (with code)
ClientApp->>AuthServer: Exchanges code for token (POST /token)
AuthServer-->>ClientApp: Returns Access Token (and optionally Refresh Token)
ClientApp->>ResourceServer: Sends Access Token with API Request
ResourceServer-->>ClientApp: Returns protected resource
`;
---
<Diagram code={diagram} alt={alt}/>
