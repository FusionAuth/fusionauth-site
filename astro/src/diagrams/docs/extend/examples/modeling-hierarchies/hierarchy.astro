---
import Diagram from 'src/components/mermaid/FlowchartDiagram.astro';

const { alt } = Astro.props;

//language=Mermaid
const diagram = `
graph BT

  subgraph Change Bank
    direction BT
    n0(("``*User*
  **Alice**``"))
    n1@{ shape: doc, label: "*Entity of type Document*
  **Passwords doc**" }
    nBank("``*Entity of type Company*
  **Change Bank**``")
    nOperationsToBanks("*Entity grant*")
    nAliceCompany("*Entity grant*")
    nAliceDepartment("*Entity grant*")
    n16("``*Permission*
    **ReadAccess**``")
    n17("``*Permission*
    **WriteAccess**``")
    n18("``*Permission*
    **IsMember**``")
    nBankOperations[/"``*Entity of type Department*
  **Operations**``"/]
    n19("``*Permission*
    **ReadAccess**``")
    n20("``*Permission*
    **WriteAccess**``")
    n21("``*Permission*
    **IsMember**``")
    n22("*Entity grant*")
    n23("``*Permission*
    **ReadAccess**``")
    n24("``*Permission*
    **WriteAccess**``")
  end

  subgraph Change Insurance
    direction BT
    n5[/"``*Entity of type Department*
  **Operations**``"/]
    n6("*Entity grant*")
    n3("``*Entity of type Company*
  **Change Insurance**``")
    n10("``*Permission*
    **ReadAccess**``")
    n11("``*Permission*
    **WriteAccess**``")
    n12("``*Permission*
    **IsMember**``")
    n13("``*Permission*
    **ReadAccess**``")
    n14("``*Permission*
    **WriteAccess**``")
    n15("``*Permission*
    **IsMember**``")
  end

    n0 --o nAliceCompany & nAliceDepartment
    n1 --o n22 & n23 & n24
    nBank --o n16 & n17 & n18
    n3 --o n10 & n11 & n12
    nBankOperations --o nOperationsToBanks & n19 & n20 & n21
    n5 --o n6 & n13 & n14 & n15
    n6 --o n3 & n12
    nOperationsToBanks --o nBank & n18
    nAliceCompany --o nBank
    nAliceDepartment --o nBankOperations  & n19 & n20
    n22 --o nBankOperations & n21
`;
---
<Diagram code={diagram} alt={alt}/>
