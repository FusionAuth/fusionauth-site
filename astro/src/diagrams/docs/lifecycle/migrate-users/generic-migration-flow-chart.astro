---
import Diagram from 'src/components/mermaid/FlowchartDiagram.astro';

const { alt } = Astro.props;

//language=Mermaid
const diagram = `
graph TD
hashes(Do you have access to password hashes and salts?) -- Yes --> pluginchoice(Using custom hashing algorithm?)
pluginchoice -- Yes --> writeplugin[Write custom password hashing algorithm] 
pluginchoice -- No --> segmentchoice(Users naturally split into segments?)
segmentchoice -- No --> bigbang[Big bang migration using User Import API]
segmentchoice -- Yes --> segment[Segment migration using User Import API]
writeplugin --> segmentchoice
hashes -- No --> passwordreset(Resetting all user passwords acceptable?)
passwordreset -- No --> slowmigration[Slow migration]
passwordreset -- Yes --> segmentchoice2(Users naturally split into segments?)
segmentchoice2 -- No --> bigbang2[Big bang migration using User Import API]
segmentchoice2 -- Yes --> segment2[Segment by segment migration using User Import API]
bigbang2 --> reset[Script reset of users passwords]
segment2 --> reset
`;
---
<Diagram code={diagram} alt={alt}/>

