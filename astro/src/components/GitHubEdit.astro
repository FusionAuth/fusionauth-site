---
import type { AstroGlobal } from "astro";

/** Gets the URL to edit the page on GitHub */

export function getGithubEditUrl(Astro: Readonly<AstroGlobal>) {
  const slug = Astro.params?.slug;
  const splitSlug = slug?.split("/");
  const appendFile = splitSlug?.length
    ? splitSlug?.length > 1
      ? `/${slug}.md`
      : `/${splitSlug.at(0)}/index.mdx`
    : "";
  const githubEditUrl = `https://github.com/FusionAuth/fusionauth-site/blob/master/astro/src/content/articles${appendFile}`;

  return githubEditUrl;
}
---

{
  (
    <>
      <p class="font-semibold pb-4 text-sm">Contribute</p>
      <ul class="border-l border-slate-900/10 group mb-10 space-y-3 dark:border-slate-100/10">
        <li>
          <a
            href={getGithubEditUrl(Astro)}
            target="_blank"
            class="block border-l border-transparent pl-4 text-slate-700 text-sm -ml-px dark:text-slate-400 dark:hover:border-slate-400 dark:group-[.active]:border-indigo-400 dark:group-[.active]:text-indigo-400 group-[.active]:border-indigo-600 group-[.active]:font-semibold group-[.active]:text-indigo-600 hover:border-slate-900/50"
          >
            Edit on Github
          </a>
        </li>
      </ul>
    </>
  )
}
