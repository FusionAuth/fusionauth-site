<head>
  <title>{{ page.title }} - {{ site.title }}</title>
  <meta name="description" content="{{ page.description }}"/>
  <meta name="viewport" content="initial-scale=1, width=device-width"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400" >
  <link rel="stylesheet" href="{{ '/assets/css/normalize-4.1.1.css' | relative_url }}"/>
  <link rel="stylesheet" href="{{ '/assets/css/docs-highlight.css' | relative_url }}"/>
  <link rel="stylesheet" href="{{ '/assets/css/docs-main.css' | relative_url }}"/>

  <script type="application/javascript" src="{{ '/assets/js/prime-min-1.3.1.js' | relative_url }}"></script>

  <script type="application/javascript">
    Prime.Document.onReady(function() {
      var aside = Prime.Document.queryFirst('aside');
      Prime.Document.query('aside nav li a[href="#"]').each(function(button) {
        button.addEventListener('click', function(event) {
          Prime.Utils.stopEvent(event);
          var a = new Prime.Document.Element(event.currentTarget);
          var nav = a.getParent().queryFirst('ul');
          if (nav.hasClass('active')) {
            nav.removeClass('active');
            a.removeClass('open');
          } else {
            nav.addClass('active');
            a.addClass('open');
          }
        });
      });

      // could probably just add this to the Side Menu Widget
      // - save scroll position on the side menu
      aside.addEventListener('click', function(event) {
        var target = new Prime.Document.Element(event.target);
        if (target.is('a') && target.getAttribute('href') !== '#') {
          sessionStorage.setItem('p_aside_scrollTop', aside.getScrollTop());
        }
      });

      // restore scroll position
      var scrollTop = sessionStorage.getItem('p_aside_scrollTop');
      if (Prime.Utils.isDefined(scrollTop)) {
        aside.scrollTo(scrollTop);
      }

      new Prime.Widgets.SideMenu(Prime.Document.queryFirst('header button'), Prime.Document.queryFirst('.main'));

      (function() {
        var cx = '008562522138890321085:g67oxezktqg';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();

      var match,
          pl     = /\+/g,  // Regex for replacing addition symbol with a space
          search = /([^&=]+)=?([^&]*)/g,
          query  = window.location.search.substring(1);
      while (match = search.exec(query)) {
        if (match[1] === 'q') {
          Prime.Document.queryFirst('header input[type=text]').setValue(decodeURIComponent(match[2].replace(pl, " ")));
        }
      }

    });
  </script>
</head>
